(function(t){function e(e){for(var a,s,r=e[0],l=e[1],u=e[2],d=0,h=[];d<r.length;d++)s=r[d],i[s]&&h.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;o.push([1,"chunk-vendors"]),n()})({0:function(t,e){},"0810":function(t,e,n){t.exports=n.p+"img/img-01.3c46da04.png"},"0927":function(t,e,n){"use strict";var a=n("1c25"),i=n.n(a);i.a},1:function(t,e,n){t.exports=n("56d7")},"1b93":function(t,e,n){},"1c25":function(t,e,n){},2:function(t,e){},"22a0":function(t,e,n){},"2b2a":function(t,e,n){},3:function(t,e){},"34dc":function(t,e,n){"use strict";var a=n("987c"),i=n.n(a);i.a},"3d6c":function(t,e,n){"use strict";var a=n("22a0"),i=n.n(a);i.a},"4daf":function(t,e){t.exports="data:image/png;base64,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"},5560:function(t,e,n){t.exports=n.p+"img/small.1e9357d0.png"},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("3f46"),i=n.n(a),o=(n("5c07"),n("53da"),n("2556"),n("d0f8"),n("6e6d")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.loginPage?t._e():a("div",{staticClass:"header"},[a("img",{staticClass:"logo",attrs:{src:n("cf05"),alt:"沃木木艺"}}),a("div",{staticClass:"right"},[a("Menu",{staticClass:"menu",attrs:{mode:"horizontal","active-name":t.activeIndex},on:{"on-select":t.changeMenu}},[a("MenuItem",{attrs:{name:"1"}},[a("Icon",{attrs:{type:"ios-paper"}}),t._v("\n              分类列表\n          ")],1),a("MenuItem",{attrs:{name:"2"}},[a("Icon",{attrs:{type:"ios-people"}}),t._v("\n              输入数据\n          ")],1)],1),a("div",{staticClass:"user"},[a("Dropdown",[a("Icon",{attrs:{type:"md-person"}}),t._v(" "+t._s(t.username)+"\n          "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(e){return t.logOut(e)}}},[t._v("退出登录")])],1)],1)],1)],1)]),a("router-view",{staticClass:"container",class:{"login-container":t.loginPage}})],1)},r=[],l={data:function(){return{pathList:["/","/input"],isManager:common.isManager,common:common}},mounted:function(){this.getManager()},computed:{activeIndex:function(){return this.pathList.indexOf(this.$route.path)+1+""},loginPage:function(){return"/login"==this.$route.path},username:function(){return common.username}},methods:{getManager:function(){this.username||this.loginPage||(this.$Message.info("请重新登录!"),this.$router.push({path:"/login"}))},changeMenu:function(t){console.log(common.username),this.$router.push({path:this.pathList[t-1]})},logOut:function(){localStorage.setItem("username",""),localStorage.setItem("isManager",""),common.username="",common.isManager=!1,this.$Message.success("退出登录成功"),this.$router.push({path:"/login"})}}},u=l,c=(n("5c0b"),n("17cc")),d=Object(c["a"])(u,s,r,!1,null,null,null),h=d.exports,m=n("1e6f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"seriesList"},[t.isManager?n("Button",{nativeOn:{click:function(e){t.newFlag=!0}}},[t._v("新建分组")]):t._e(),t.isManager?n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.newItem(e)}}},[t._v("新建项目")]):t._e(),t._l(t.groupList,function(e,a){return n("div",{key:e.objectId,staticClass:"wrap"},[n("div",{staticClass:"title"},[t._v("\n        "+t._s(e.title)+"\n        "),t.isManager?n("div",{staticClass:"action",on:{click:function(e){return t.deleteGroup(a)}}},[t._v("删除分组")]):t._e()]),n("div",{staticClass:"card-wrap"},t._l(e.itemList,function(e,i){return n("Card",{key:i,class:{first:i%5===0},nativeOn:{click:function(e){return t.editItem(a,i)}}},[n("p",{staticStyle:{"margin-bottom":"0px","vertical-align":"middle"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))]),t.isManager?n("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extra"},slot:"extra"},[n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return e.stopPropagation(),t.deleteItem(a,i)}}})],1):t._e(),n("p",[t._v(t._s(e.info))])])}),1)])}),t._e(),n("Modal",{attrs:{title:"删除分组"},on:{"on-ok":t.confirmDeleteGroup},model:{value:t.deleteGroupFlag,callback:function(e){t.deleteGroupFlag=e},expression:"deleteGroupFlag"}},[n("p",[t._v("删除该分组会也会删除该分组下面的算法，确认删除？")])]),n("Modal",{attrs:{title:"删除算法"},on:{"on-ok":t.confirmDelete},model:{value:t.deleteFlag,callback:function(e){t.deleteFlag=e},expression:"deleteFlag"}},[n("p",[t._v("删除后不可恢复，确认要删除这个算法内容？")])]),n("Modal",{attrs:{title:"新建分组"},model:{value:t.newFlag,callback:function(e){t.newFlag=e},expression:"newFlag"}},[n("Input",{attrs:{placeholder:"请输入新建的分组名称"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{nativeOn:{click:function(e){t.newFlag=!1,t.newName=""}}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.confirmNewGroup(e)}}},[t._v("确认")])],1)],1)],2)},p=[],g=n("cc80"),v=n.n(g),b=(n("612f"),{algorithm:{baseInfo:{name:"",groupId:"",info:"",doorLeafHeight:0,doorLeafWidth:0,bigImg:"",smallImg:""},other:{soil:[{name:"面板料",length:-40,lenPara:"doorLeafHeight",width:-40,fixedFlag:!1,thick:5,thickType:"多层板",num:2},{name:"顶部面板",length:-40,lenPara:"doorLeafHeight",width:-40,fixedFlag:!1,thick:5,thickType:"多层板",num:2},{name:"池板料",length:-20,lenPara:"doorLeafHeight",width:120,fixedFlag:!0,thick:12,thickType:"中纤板",num:2}],skin:[]},line:{normal:[{name:"横套线",length:-10,lenPara:"doorWidth",width:null,thick:"内15",thickness:"",num:2},{name:"竖套线",length:-20,lenPara:"doorHeight",width:null,thick:"29",thickness:"",num:4}],three:[{name:"横套线",length:-10,lenPara:"doorWidth",width:null,thick:"29",thickness:"",num:1},{name:"竖套线",length:-20,lenPara:"doorHeight",width:null,thick:"29",thickness:"",num:2}]},door:[{name:"横档条",lenPara:"doorLeafWidth",length:-10,width:{minLen:10,maxLen:20,fixedLen:30},thick:12,num:1,showCondition:!0},{name:"横主板",lenPara:"doorLeafWidth",length:-10,width:-10,thick:12,num:1},{name:"竖档条",length:-10,lenPara:"doorLeafHeight",width:{minLen:10,maxLen:20,fixedLen:30},thick:22,num:1,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:-10,width:-10,thick:22,num:1}],cupboardDoors:[{name:"横档条",length:-10,lenPara:"doorLeafWidth",width:{minLen:10,maxLen:20,fixedLen:30},thick:12,num:1,showCondition:!0},{name:"横主板",lenPara:"doorLeafWidth",length:-10,width:-10,thick:12,num:1},{name:"竖档条",length:-10,lenPara:"doorLeafHeight",width:{minLen:10,maxLen:20,fixedLen:30},thick:22,num:1,showCondition:!0},{name:"竖主板",length:-10,lenPara:"doorLeafHeight",width:-10,thick:22,num:1}],openDoors:[{name:"横档条",length:-10,lenPara:"doorLeafWidth",width:{minLen:10,maxLen:20,fixedLen:30},thick:12,num:1,showCondition:!0},{name:"横主板",length:-10,lenPara:"doorLeafWidth",width:-10,thick:12,num:1},{name:"竖档条",length:-10,lenPara:"doorLeafHeight",width:{minLen:10,maxLen:20,fixedLen:30},thick:22,num:1,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:-10,width:-10,thick:22,num:1}],windowCover:[{name:"窗套",lenPara:"doorLeafHeight",length:0,width:0,thick:22,num:1},{name:"窗套",length:0,lenPara:"doorLeafWidth",width:0,thick:22,num:1}],dumb:[{name:"三面哑口套",lenPara:"doorLeafHeight",length:0,width:0,thick:22,num:1},{name:"三面哑口套",length:0,lenPara:"doorLeafWidth",width:0,thick:22,num:1}]}}),I=b,L={data:function(){return{newName:"",newFlag:!1,deleteGroupFlag:!1,deleteFlag:!1,deleteIndex:null,groupList:[],groupMap:{}}},computed:{isManager:function(){return common.isManager}},mounted:function(){this.getGroup(),console.log(common.isManager)},methods:{getGroup:function(){var t=this;common.get("classes/Group").then(function(e){var n=[];e.results.forEach(function(e){n.push(e.objectId),e.itemList=[],t.groupMap[e.objectId]=e}),t.getItemList(n)})},getItemList:function(t){var e=this,n={groupId:{$in:t}},a="?where="+v()(n);a+="&keys=groupId,info,title,objectId",common.get("classes/itemList"+a).then(function(t){for(var n in t.results.forEach(function(t){e.groupMap[t.groupId].itemList.push(t)}),e.groupMap){var a=e.groupMap[n];e.groupList.push(a)}})},cloneJson:function(t){return JSON.parse(v()(t))},confirmNewGroup:function(){var t=this;if(this.newName){this.newFlag=!1;var e=this.cloneJson(this.newName),n={title:e};common.post("classes/Group",n).then(function(n){t.newName="",t.groupList.push({objectId:n.objectId,title:e,itemList:[]}),t.$Message.success(e+"分组创建成功!")})}else this.$Message.info("请输入分组的名称!")},copy:function(t,e){var n=this.cloneJson(this.groupList[t].itemList[e]);this.groupList[t].itemList.splice(e,0,n),this.$Message.success("复制成功!")},deleteItem:function(t,e){this.deleteIndex={index:t,eleIndex:e},this.deleteFlag=!0},remove:function(t,e,n){var a=this.groupList[t].itemList.splice(e,1);this.groupList[n].itemList.push(a[0]),this.$Message.success("移动成功!")},confirmDelete:function(){var t=this,e=this.deleteIndex.index,n=this.deleteIndex.eleIndex,a=this.groupList[e].itemList;common.delete("classes/itemList/"+a[n].objectId).then(function(e){t.$Message.success("删除"+a[n].title+"成功!"),a.splice(n,1)})},deleteGroup:function(t){this.deleteIndex=t,this.deleteGroupFlag=!0},confirmDeleteGroup:function(){var t=this,e=this.groupList[this.deleteIndex],n=this.groupList[this.deleteIndex].objectId,a=[{method:"DELETE",path:"/1/classes/Group/"+n}];e.itemList.forEach(function(t){a.push({method:"DELETE",path:"/1/classes/itemList/"+t.objectId})}),common.post("batch",{requests:a}).then(function(e){t.groupList.splice(t.deleteIndex,1),t.$Message.success("删除分组成功!")})},editItem:function(t,e){var n=this.groupList[t].itemList[e];this.$router.push({path:"/edit",query:{id:n.objectId}})},seeInfo:function(){},newItem:function(){this.$router.push({path:"/new"})}}},k=L,w=(n("abcb"),Object(c["a"])(k,f,p,!1,null,null,null)),y=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"backData"},[n("div",{staticClass:"inpuWrap"},[n("img",{staticStyle:{width:"612px",display:"none"},attrs:{src:t.bigImg}}),n("img",{staticStyle:{width:"612px",display:"none"},attrs:{src:t.smallImg}}),n("img",{ref:"outLogo",staticStyle:{width:"612px",display:"none"},attrs:{src:t.outLogo}}),n("Card",{staticClass:"base-info"},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("数据录入")]),n("Form",{attrs:{model:t.baseInfo,"label-width":80}},[n("FormItem",{staticClass:"one-four",attrs:{label:"订单号"}},[n("Input",{attrs:{placeholder:"请输入订单号"},model:{value:t.baseInfo.orderNum,callback:function(e){t.$set(t.baseInfo,"orderNum",e)},expression:"baseInfo.orderNum"}})],1),n("FormItem",{staticClass:"one-four",attrs:{label:"分组"}},[n("Select",{on:{"on-change":t.changeStyle},model:{value:t.doorStyleIndex,callback:function(e){t.doorStyleIndex=e},expression:"doorStyleIndex"}},t._l(t.groupList,function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.title))])}),1)],1),n("FormItem",{staticClass:"one-four",attrs:{label:"款式"}},[n("Select",{model:{value:t.doorTypeIndex,callback:function(e){t.doorTypeIndex=e},expression:"doorTypeIndex"}},t._l(t.doorTypeList,function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.title))])}),1)],1),n("FormItem",{staticClass:"one-four",attrs:{label:"套线型号"}},[n("Input",{attrs:{placeholder:"请输入套线型号"},model:{value:t.baseInfo.lineType,callback:function(e){t.$set(t.baseInfo,"lineType",e)},expression:"baseInfo.lineType"}})],1),t.isEFlag?n("FormItem",{staticClass:"one-four",attrs:{label:"竖套线厚度"}},[n("InputNumber",{attrs:{placeholder:"请输入竖套线厚度"},model:{value:t.baseInfo.verLineTick,callback:function(e){t.$set(t.baseInfo,"verLineTick",e)},expression:"baseInfo.verLineTick"}})],1):t._e(),t.isEFlag?n("FormItem",{staticClass:"one-four",attrs:{label:"横套线厚度"}},[n("InputNumber",{attrs:{placeholder:"请输入横套线厚度"},model:{value:t.baseInfo.acrossLineTick,callback:function(e){t.$set(t.baseInfo,"acrossLineTick",e)},expression:"baseInfo.acrossLineTick"}})],1):t._e(),n("FormItem",{staticClass:"one-four",attrs:{label:"材质类型"}},[n("Select",{model:{value:t.baseInfo.materialType,callback:function(e){t.$set(t.baseInfo,"materialType",e)},expression:"baseInfo.materialType"}},t._l(t.materialList,function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),n("FormItem",{staticClass:"one-four",attrs:{label:"材质"}},[n("Input",{attrs:{placeholder:"请输入客户地址"},model:{value:t.baseInfo.material,callback:function(e){t.$set(t.baseInfo,"material",e)},expression:"baseInfo.material"}})],1),n("FormItem",{staticClass:"one-four",attrs:{label:"颜色"}},[n("Input",{attrs:{placeholder:"请输入颜色"},model:{value:t.baseInfo.color,callback:function(e){t.$set(t.baseInfo,"color",e)},expression:"baseInfo.color"}})],1),n("FormItem",{staticClass:"one-four",attrs:{label:"客户地址"}},[n("Input",{attrs:{placeholder:"请输入客户地址"},model:{value:t.baseInfo.address,callback:function(e){t.$set(t.baseInfo,"address",e)},expression:"baseInfo.address"}})],1)],1),n("my-input-table",{on:{addNew:t.addNew}})],1),n("Card",{staticStyle:{"margin-top":"30px"}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                录入表格\n            ")]),n("Table",{attrs:{columns:t.columns,data:t.outDataList}})],1),n("div",{staticClass:"next-wrap"},[n("Button",{attrs:{type:"primary"},on:{click:t.showData}},[t._v("生成数据")])],1)],1),n("Modal",{staticClass:"canvas-modal",attrs:{title:"生成图片"},on:{"on-ok":t.confirmPicture},model:{value:t.showPicture,callback:function(e){t.showPicture=e},expression:"showPicture"}},[t._v("\n        大图数据：\n        "),n("canvas",{staticStyle:{"margin-bottom":"10px"},attrs:{id:"bigCanvas",width:"640",height:"490"}}),t._v("\n        小图数据：\n        "),n("canvas",{attrs:{id:"smallCanvas",width:"640",height:"490"}})]),t.doorTypeList[t.doorTypeIndex]?n("output-data",{ref:"outputData"}):t._e()],1)},C=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tableWrap"},[n("div",{staticClass:"table-header flex flex-wrap"},t._l(t.columns,function(e,a){return n("div",{key:a,staticClass:"table-item flex-1"},[t._v("\n            "+t._s(e.title)+"\n        ")])}),0),t._l(t.inputList,function(e,a){return n("div",{key:a,staticClass:"table-row flex flex-wrap"},t._l(t.columns,function(i,o){return n("div",{key:o,staticClass:"table-item flex-1"},["action"===i.key?n("div",[n("Button",{attrs:{type:"primary"},nativeOn:{click:function(n){return t.addNew(e,a)}}},[t._v("添加")])],1):t._e(),"name"===i.key?n("span",[t._v("\n                    "+t._s(e[i.key])+"：\n                ")]):t._e(),"action"!==i.key&&"name"!==i.key?n("div",["三面窗套"!==e.name?n("InputNumber",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[ele.key]"}}):t._e(),"三面窗套"===e.name&&"innerToTop"!==i.key?n("InputNumber",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[ele.key]"}}):t._e()],1):t._e()])}),0)})],2)},_=[],M={data:function(){return{notInput:["action"],inputList:[{name:"房门连套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,doorLeafThick:null,outToTop:null,innerToTop:null},{name:"三面哑口套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,doorLeafThick:null,outToTop:null,innerToTop:null},{name:"三面窗套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,doorLeafThick:null,outToTop:null},{name:"柜门连套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,doorLeafThick:null,outToTop:null,innerToTop:null},{name:"对开门连套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,doorLeafThick:null,outToTop:null,innerToTop:null}],columns:[{title:"名称",key:"name"},{title:"门洞高度",key:"doorHeight"},{title:"门洞宽度",key:"doorWidth"},{title:"门洞厚度",key:"doorThick"},{title:"门扇厚度",key:"doorLeafThick"},{title:"外到顶高度",key:"outToTop"},{title:"内到顶高度",key:"innerToTop"},{title:"操作",key:"action"}],nulllMap:{outToTop:!0,innerToTop:!0,doorLeafHeight:!0,doorLeafWidth:!0},wordMap:{name:"名字",doorHeight:"门洞高度",doorWidth:"门洞宽度",doorThick:"门洞厚度",doorLeafThick:"门扇厚度"}}},computed:{},mounted:function(){},methods:{cloneJson:function(t){return JSON.parse(v()(t))},addNew:function(t,e){for(var n in t)if(!this.nulllMap[n]&&!t[n])return console.log(n),void this.$Message.info("请输入"+this.wordMap[n]+"!");for(var a in this.$emit("addNew",this.cloneJson(t)),this.inputList[e])"name"!==a&&(this.inputList[e][a]=null)}}},W=M,P=(n("34dc"),Object(c["a"])(W,T,_,!1,null,null,null)),F=P.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outPutData"})},O=[],H=(n("3a23"),n("96f8")),S=n.n(H),N=n("e429"),A=n.n(N),E=(n("d4df"),{data:function(){return{baseInfo:null,algorithm:null,inputList:[]}},computed:{},mounted:function(){},methods:{cloneJson:function(t){return JSON.parse(v()(t))},outputXlsxFile:function(t,e){var n=A.a.utils.book_new();A.a.utils.book_append_sheet(n,t,e),A.a.writeFile(n,this.baseInfo.orderNum+"-"+e+".xlsx")},initData:function(t,e,n){this.baseInfo=t,this.algorithm=e,this.inputList=n,this.dealAlgorithm()},dealAlgorithm:function(){var t=this.baseInfo,e=this.algorithm,n=e.line,a=t.lineType,i=S()(a.substr(1,a.length)),o=t.verLineTick,s=t.acrossLineTick,r=0===a.indexOf("E");for(var l in n)for(var u in n[l]){var c=n[l][u];c.width=i,r&&(c.thickness="horizontal"===u?s:o,c.thickness="厚度"+c.thickness)}this.outPutOrder(),this.outPutLineOrder(),this.outPutOtherPartsOrder(),this.outPutbasePartsData()},getHWTInfo:function(t,e,n,a){var i=t+"*"+e+"*"+n;return a&&(i+="="+a),i},outPutOrder:function(){var t=this,e=this.baseInfo,n=[["订单编号 \n "+e.orderNum,"","","经销商","","","","","品牌以及包装","带商标包装"],["","","","客户地址",e.orderNum.address,"","","","尺寸单位:mm(毫米)",""]],a=["序号","位置及名称","门型","材质","颜色","套线型号","门洞尺寸(高*宽*墙厚)","门扇尺寸(高*宽*墙厚)","数量","备注"],i=[a];this.inputList.forEach(function(n,a){var o=t.getHWTInfo(n.doorHeight,n.doorWidth,n.doorThick),s=t.getHWTInfo(n.doorLeafHeight,n.doorLeafWidth,n.doorLeafThick);i.push([a+1,n.name,"",e.material,e.color,e.lineType,o,s,"1套",""])});var o=A.a.utils.aoa_to_sheet(n);o["!cols"]=this.setColWidth([10,20,10,10,10,10,20,30,30]),o["!rows"]=this.setRowHeight(i),o["!merges"]=[{s:{r:0,c:0},e:{r:1,c:2}},{s:{r:0,c:4},e:{r:0,c:7}},{s:{r:1,c:4},e:{r:1,c:7}},{s:{r:1,c:8},e:{r:1,c:9}}],A.a.utils.sheet_add_aoa(o,i,{origin:"A3"}),this.outputXlsxFile(o,"订货单")},outPutbasePartsData:function(){var t=this,e={"房门连套":"door","柜门连套":"cupboardDoors","对开门连套":"openDoors","三面窗套":"windowCover","三面哑口套":"dumb"},n={"房门连套":!0,"柜门连套":!0,"对开门连套":!0},a=["序号","生产单号","颜色","材料","部件","长*宽*厚=数量","备注"],i=[a],o=[],s=[],r=0;this.inputList.forEach(function(a,l){var u=a.name,c=t.algorithm[e[u]],d=0,h=(c.length,[]);c.forEach(function(e,i){var o="多层板"+e.thick+"mm",u=(n[a.name],a[e.lenPara]+e.length),c=a.doorThick+e.thick,m=[l+1,t.baseInfo.orderNum+"-"+(l+1),t.baseInfo.color,o];if(n[a.name])e.name.indexOf("档条")>-1&&(c=a.doorThick-e.width.fixedLen,c>e.width.maxLen&&(c=e.width.maxLen),c<e.width.minLen&&(c=e.width.minLen)),22===e.thick&&(d+=e.num),h.push(m.concat([e.name,t.getHWTInfo(u,c,e.thick,e.num),""]));else{var f=t.getHWTInfo(u,c,e.thick,e.num);22===e.thick&&(r+=e.num);var p=a.name.indexOf("窗套")>-1?"窗套":"哑口";s.push(m.concat([p,f,""]))}}),h.length>0&&(i=i.concat(h),i.push(["门框  多层板22mm小计","","","",d,"",""]),o.push({s:{r:i.length-1,c:0},e:{r:i.length-1,c:3}}),o.push({s:{r:i.length-1,c:4},e:{r:i.length-1,c:5}}))}),s.length>0&&(i=i.concat(s),i.push(["哑口 多层板22mm小计","","","",r,"",""]),o.push({s:{r:i.length-1,c:0},e:{r:i.length-1,c:3}}),o.push({s:{r:i.length-1,c:4},e:{r:i.length-1,c:5}}));var l=A.a.utils.aoa_to_sheet(i);l["!cols"]=this.setColWidth([10,10,10,10,10,20,10]),l["!rows"]=this.setRowHeight(i),l["!merges"]=o,this.outputXlsxFile(l,"部件汇总(门框部分)")},outPutOtherPartsOrder:function(){var t=this,e={},n=this.baseInfo,a=this.algorithm.other,i="混油"===n.materialType?a.soil:a.skin;this.inputList.forEach(function(n,a){"房门连套"===n.name&&i.forEach(function(i){var o=i.thickType+i.thick+"mm";e[o]||(e[o]=[]);var s=n[i.lenPara]+i.length,r=i.fixedFlag?i.width:n.doorLeafWidth+i.width;i.thickInfo=o,i.info=t.getHWTInfo(s,r,i.thick,i.num),i.index=a,e[o].push(i)})});var o=["序号","生产单号","颜色","材料","部件","长*宽*厚=数量","备注"],s=[o],r=[],l=function(n){var a=e[n],i=a.length,o=0;a.forEach(function(e,n){var a=e.index+1;s.push([a,t.baseInfo.orderNum+"-"+a,t.baseInfo.color,e.thickInfo,e.name,e.info,""]),o+=e.num,n===i-1&&(s.push([e.thickInfo,"","","",o,"",""]),r.push({s:{r:s.length-1,c:0},e:{r:s.length-1,c:3}}),r.push({s:{r:s.length-1,c:4},e:{r:s.length-1,c:5}}))})};for(var u in e)l(u);var c=A.a.utils.aoa_to_sheet(s);c["!cols"]=this.setColWidth([10,10,10,10,10,20,10]),c["!rows"]=this.setRowHeight(s),c["!merges"]=r,this.outputXlsxFile(c,"部件汇总")},outPutLineOrder:function(){var t=this,e=this.baseInfo,n=this.algorithm.line,a=["序号","生产单号","颜色","套线型号","部件","长*宽*厚=数量","备注"],i=[a],o=0;this.inputList.forEach(function(a,s){var r=s+1,l="三面窗套"===a.name?"three":"normal",u=[r,e.orderNum+"-"+r,e.color,e.lineType],c=[];n[l].forEach(function(e){var n=e.name.indexOf("横")>-1,i=e.name,s=e.width,r=e.thick,l=e.num,d=e.thickness;if(o+=l,!n&&(n||a.outToTop&&"three"!==i)){var h=t.getHWTInfo(a.outToTop+20,s,r,l/2),m=t.getHWTInfo(a.innerToTop+20,s,r,l/2);c.push(u.concat([i,h,d])),c.push(u.concat([i,m,d]))}else{var f=a[e.lenPara]+e.length;n||"three"!==i||(f=a.outToTop+20);var p=t.getHWTInfo(f,s,r,l);c.push(u.concat([i,p,d]))}}),i=i.concat(c)});var s=i.length;i.push(["套线"+e.lineType+"小计","","","",o,"",""]);var r=A.a.utils.aoa_to_sheet(i);r["!cols"]=this.setColWidth([10,10,10,10,10,20,10]),r["!rows"]=this.setRowHeight(i),r["!merges"]=[{s:{r:s,c:0},e:{r:s,c:3}},{s:{r:s,c:4},e:{r:s,c:5}}],this.outputXlsxFile(r,"部件汇总(套线部分)")},setColWidth:function(t){var e=[];return t.forEach(function(t){e.push({wch:t})}),e},setRowHeight:function(t){var e=[];return t.forEach(function(t){e.push({hpt:20})}),e}}}),G=E,j=(n("ce77"),Object(c["a"])(G,D,O,!1,null,null,null)),z=j.exports,B=(n("5f03"),n("d72d"),n("4daf"),{components:{MyInputTable:F,OutputData:z},data:function(){var t=this;return{showPicture:!1,groupList:[],bigImg:null,smallImg:null,materialList:["贴皮","混油"],outLogo:null,doorStyleIndex:0,doorTypeIndex:0,baseInfo:{orderNum:"18-403",lineType:"",doorStyle:"",doorType:"",verLineTick:"",acrossLineTick:"",materialType:"混油",material:"卡斯拉木皮",color:"开放505",address:"奥克斯中山服"},columns:[{type:"index",width:60,align:"center"},{title:"位置及名称",key:"name"},{title:"门洞尺寸(长*宽*厚)",render:function(e,n){var a=n.row,i=t.getHWTInfo(a.doorHeight,a.doorWidth,a.doorThick);return e("div",i)}},{title:"门扇尺寸(长*宽*厚)",render:function(e,n){var a=n.row,i=t.getHWTInfo(a.doorLeafHeight,a.doorLeafWidth,a.doorLeafThick);return e("div",i)}},{title:"外到顶高度",key:"outToTop"},{title:"内到顶高度",key:"innerToTop"},{title:"操作",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){t.outDataList.splice(n.index,1)}}},"删除")])}}],outDataList:[],groupMap:{},bigList:[],smallList:[]}},computed:{isEFlag:function(){return"E"===this.baseInfo.lineType.substring(0,1)},algorithm:function(){if(this.doorTypeList.length>0)return this.doorTypeList[this.doorTypeIndex].algorithm},doorTypeList:function(){return this.groupList.length>0?this.groupList[this.doorStyleIndex].itemList:[]}},mounted:function(){this.getGroup(),this.bigImg=n("7fbe"),this.smallImg=n("5560"),this.outLogo=n("4daf")},methods:{getGroup:function(){var t=this;common.get("classes/Group").then(function(e){var n=[];e.results.forEach(function(e){n.push(e.objectId),e.itemList=[],t.groupMap[e.objectId]=e}),t.getItemList(n)})},getItemList:function(t){var e=this,n={groupId:{$in:t}},a="?where="+v()(n);common.get("classes/itemList"+a).then(function(t){for(var n in t.results.forEach(function(t){e.groupMap[t.groupId].itemList.push(t)}),e.groupMap){var a=e.groupMap[n];e.groupList.push(a)}})},dragPicture:function(t){var e="bigCanvas"===t,n=this.baseInfo,a=document.getElementById(t),i=a.getContext("2d"),o=new Image,s=new Image;i.fillStyle="#fff",i.fillRect(0,0,640,490),i.rect(0,0,640,490),i.rect(20,22,600,450),i.stroke(),o.src=e?this.bigImg:this.smallImg,o.setAttribute("crossOrigin","Anonymous"),i.drawImage(o,20,22,600,450),s.src=this.outLogo,i.drawImage(s,40,473,64,15),i.fillStyle="#000",i.font="14px Arial";var r=16,l=185,u=420;i.fillText("制图人:"+common.username,500,485),i.fillText("订单号:"+n.orderNum,30,r),i.fillText("地址:"+n.address,150,r),i.fillText("颜色:"+n.material+n.color,430,r),this.bigList.forEach(function(t){l+=15,i.fillText(t.index+"#   "+t.info,u,l)})},outCanvas:function(t){console.log("生成数据");var e="bigCanvas"===t,n=document.getElementById(t),a=this.baseInfo;n.toBlob(function(t){var n=e?"big":"small";saveAs(t,a.orderNum+"-"+n+".png")})},showData:function(){this.showPicture=!0,this.dragPicture("bigCanvas"),this.dragPicture("smallCanvas")},changeStyle:function(t){this.doorTypeList=this.groupList[t].itemList},addNew:function(t){var e=this.algorithm.baseInfo;t.doorLeafHeight=t.doorHeight+e.doorLeafHeight,t.doorLeafWidth=t.doorWidth+e.doorLeafWidth,this.outDataList.push(t);var n=t.doorLeafHeight+"*"+t.doorLeafWidth+"*"+t.doorLeafThick+"=1",a=this.outDataList.length;console.log(t.doorLeafWidth),t.doorLeafWidth>=750?this.bigList.push({index:a,info:n}):this.smallList.push({index:a,info:n})},getHWTInfo:function(t,e,n,a){var i=t+"*"+e+"*"+n;return a&&(i+="="+a),i},confirmPicture:function(){this.outCanvas("bigCanvas"),this.outCanvas("smallCanvas")}}}),q=B,J=(n("ba27"),Object(c["a"])(q,x,C,!1,null,null,null)),$=J.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"newCalculation"},[t.algorithm?n("div",{staticClass:"cardWrap"},[n("Breadcrumb",{staticStyle:{"margin-bottom":"10px"}},[n("BreadcrumbItem",{attrs:{to:"/"}},[t._v("首页")]),n("BreadcrumbItem",[t.isManager?n("span",[t._v(t._s(t.id?"编辑":"新建"))]):t._e(),t._v("算法信息")])],1),n("Card",[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n                基本信息\n                "),t.isManager?n("Button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:t.save}},[t._v("保存算法")]):t._e()],1),n("Form",{attrs:{model:t.algorithm.baseInfo,"label-width":80}},[n("FormItem",{staticClass:"one-four",attrs:{label:"名称"}},[t.isManager?n("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.algorithm.baseInfo.name,callback:function(e){t.$set(t.algorithm.baseInfo,"name",e)},expression:"algorithm.baseInfo.name"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.name))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"分组"}},[t.isManager?n("Select",{model:{value:t.algorithm.baseInfo.groupId,callback:function(e){t.$set(t.algorithm.baseInfo,"groupId",e)},expression:"algorithm.baseInfo.groupId"}},t._l(t.groupList,function(e){return n("Option",{key:e.title,attrs:{value:e.objectId}},[t._v(t._s(e.title))])}),1):n("span",[t._v(t._s(t.groupMap[t.algorithm.baseInfo.groupId]))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"简介"}},[t.isManager?n("Input",{attrs:{placeholder:"请输入简介"},model:{value:t.algorithm.baseInfo.info,callback:function(e){t.$set(t.algorithm.baseInfo,"info",e)},expression:"algorithm.baseInfo.info"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.info))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"门扇高度 ="}},[t._v("\n                    门洞高度 "),t.isManager?n("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇高度"},model:{value:t.algorithm.baseInfo.doorLeafWidth,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafWidth",e)},expression:"algorithm.baseInfo.doorLeafWidth"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafWidth>0?"+"+t.algorithm.baseInfo.doorLeafWidth:t.algorithm.baseInfo.doorLeafWidth))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"门扇高度 ="}},[t._v("\n                    门洞高度 "),t.isManager?n("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇高度"},model:{value:t.algorithm.baseInfo.doorLeafHeight,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafHeight",e)},expression:"algorithm.baseInfo.doorLeafHeight"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafHeight>0?"+"+t.algorithm.baseInfo.doorLeafHeight:t.algorithm.baseInfo.doorLeafHeight))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"大图地址"}},[t.isManager?n("Input",{attrs:{placeholder:"请输入大图地址"},model:{value:t.algorithm.baseInfo.bigImg,callback:function(e){t.$set(t.algorithm.baseInfo,"bigImg",e)},expression:"algorithm.baseInfo.bigImg"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.bigImg))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"小图地址"}},[t.isManager?n("Input",{attrs:{placeholder:"请输入小图地址"},model:{value:t.algorithm.baseInfo.smallImg,callback:function(e){t.$set(t.algorithm.baseInfo,"smallImg",e)},expression:"algorithm.baseInfo.smallImg"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.smallImg))])],1),n("div"),n("FormItem",{staticClass:"one-four",attrs:{label:"大图"}},[n("div",{staticClass:"img-wrap"},[t.algorithm.baseInfo.bigImg?n("img",{attrs:{src:t.url+t.algorithm.baseInfo.bigImg,alt:""},on:{click:function(e){return t.showPicture("bigImg")}}}):t._e()])]),n("FormItem",{staticClass:"one-four",attrs:{label:"小图"}},[n("div",{staticClass:"img-wrap"},[t.algorithm.baseInfo.smallImg?n("img",{attrs:{src:t.url+t.algorithm.baseInfo.smallImg,alt:""},on:{click:function(e){return t.showPicture("smallImg")}}}):t._e()])])],1)],1),n("Card",{staticClass:"door-card"},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("房门算法信息")]),n("Button",{staticClass:"add",nativeOn:{click:function(e){return t.addNew(e)}}},[t._v("新增")]),n("Tabs",{model:{value:t.tabValue,callback:function(e){t.tabValue=e},expression:"tabValue"}},[n("TabPane",{attrs:{label:"混油",name:"soil"}},[n("my-table",{ref:"soil",attrs:{list:t.algorithm.other.soil,isDoor:!0}})],1),n("TabPane",{attrs:{label:"贴皮",name:"skin"}},[n("my-table",{ref:"skin",attrs:{list:t.algorithm.other.skin,isDoor:!0}})],1)],1)],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("房门算法信息")]),n("my-table",{ref:"door",attrs:{list:t.algorithm.door}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("柜门连套算法信息")]),n("my-table",{ref:"cupboardDoors",attrs:{list:t.algorithm.cupboardDoors}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("对开门连套算法信息")]),n("my-table",{ref:"openDoors",attrs:{list:t.algorithm.openDoors}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("三面窗套算法信息")]),n("my-table",{ref:"windowCover",attrs:{list:t.algorithm.windowCover}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("三面哑口套算法信息")]),n("my-table",{ref:"pass",attrs:{list:t.algorithm.dumb}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("套线算法信息")]),n("div",{staticClass:"title"},[t._v("\n                    房门连套套线、三面垭口套套线、对开门套线、柜门连套套线\n                ")]),n("my-table",{ref:"pass",attrs:{list:t.algorithm.line.normal,sleeve:!0}}),n("div",{staticClass:"title"},[t._v("\n                    三面窗套套线\n                ")]),n("my-table",{ref:"pass",attrs:{list:t.algorithm.line.three,sleeve:!0}})],1)],1):t._e(),n("Modal",{attrs:{title:"查看大图"},model:{value:t.showPictureFlag,callback:function(e){t.showPictureFlag=e},expression:"showPictureFlag"}},[n("div",{staticClass:"big-picture"},[t.imgUrl?n("img",{attrs:{src:t.imgUrl}}):t._e()])])],1)},X=[],Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tableWrap"},[n("div",{staticClass:"table-header flex flex-wrap"},t._l(t.columns,function(e,a){return n("div",{key:a,staticClass:"table-item",class:t.getClass(e.key)},[t._v("\n            "+t._s(e.title)+"\n        ")])}),0),t._l(t.data,function(e,a){return n("div",{key:a,staticClass:"table-row flex flex-wrap"},t._l(t.columns,function(i,o){return n("div",{key:o,staticClass:"table-item",class:t.getClass(i.key)},["name"===i.key?n("div",[t.isManager?n("Input",{model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}}):n("span",[t._v(t._s(e.name))])],1):t._e(),"length"===i.key?n("div",[t.isManager?n("Select",{staticStyle:{width:"90px"},attrs:{transfer:""},model:{value:e.lenPara,callback:function(n){t.$set(e,"lenPara",n)},expression:"item.lenPara"}},t._l(t.nameList,function(e){return n("Option",{key:e.para,attrs:{value:e.para}},[t._v(t._s(e.name))])}),1):n("span",[t._v(t._s(t.nameMap[e.lenPara]))]),t.isManager?n("InputNumber",{model:{value:e.length,callback:function(n){t.$set(e,"length",n)},expression:"item.length"}}):n("span",[t._v(t._s(e.length>=0?"+"+e.length:e.length))])],1):t._e(),"widthWord"===i.key?n("div",[t._v("\n                    与型号相关\n                ")]):t._e(),"width"===i.key?n("div",[e.showCondition?n("div",[t._v("\n                        条件 "),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.minLen,callback:function(n){t.$set(e.width,"minLen",n)},expression:"item.width.minLen"}}):n("span",[t._v("至少长度:"+t._s(e.width.minLen))]),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.maxLen,callback:function(n){t.$set(e.width,"maxLen",n)},expression:"item.width.maxLen"}}):n("span",[t._v("挡条最大长度:"+t._s(e.width.maxLen))]),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.fixedLen,callback:function(n){t.$set(e.width,"fixedLen",n)},expression:"item.width.fixedLen"}}):n("span",[t._v("固定长度:"+t._s(e.width.fixedLen))])],1):n("div",[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.fixedFlag,expression:"!item.fixedFlag"}]},[t._v(t._s(t.isDoor?"门扇宽度":"门洞厚度"))]),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width,callback:function(n){t.$set(e,"width",n)},expression:"item.width"}}):n("span",[t._v(t._s(e.width>=0?"+"+e.width:e.width))]),t.isDoor&&t.isManager?n("i-switch",{on:{"on-change":function(e){return t.changeFixedFlag(a)}},model:{value:e.fixedFalg,callback:function(n){t.$set(e,"fixedFalg",n)},expression:"item.fixedFalg"}}):t._e()],1)]):t._e(),"thick"===i.key?n("div",[t.isManager?n("Input",{staticStyle:{width:"50px"},model:{value:e.thick,callback:function(n){t.$set(e,"thick",n)},expression:"item.thick"}}):n("span",[t._v(t._s(e.thick))]),t._v(" mm\n                        "),void 0!==e.thickType?n("span",[t.isManager?n("Select",{attrs:{transfer:""},model:{value:e.thickType,callback:function(n){t.$set(e,"thickType",n)},expression:"item.thickType"}},t._l(t.typeList,function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1):n("span",[t._v(t._s(e.thickType))])],1):n("span",[t._v("\n                            多层板\n                        ")])],1):t._e(),"thickness"===i.key?n("div",[t._v("\n                    只有E系列才有\n                ")]):t._e(),"num"===i.key?n("div",[t.isManager?n("InputNumber",{model:{value:e.num,callback:function(n){t.$set(e,"num",n)},expression:"item.num"}}):n("span",[t._v(t._s(e.num))])],1):t._e(),"action"===i.key?n("div",{staticClass:"action"},[n("Button",{attrs:{type:"text"},on:{click:function(e){return t.deleteItem(a)}}},[t._v("删除")]),n("Button",{attrs:{type:"text"},on:{click:function(e){return t.addItem(a)}}},[t._v("新增")])],1):t._e()])}),0)})],2)},R=[],U={props:{list:Array,isDoor:Boolean,sleeve:Boolean},data:function(){return{isManager:common.isManager,infoMap:{},typeList:["多层板","中纤板"],columns:[{title:"名称",key:"name"},{title:"长度",key:"length"},{title:"宽度",key:"width"},{title:"厚度",key:"thick"},{title:"数量",key:"num"},{title:"操作",key:"action"}],nameList:[{name:"门洞宽度",para:"doorWidth"},{name:"门洞高度",para:"doorHeight"},{name:"门扇宽度",para:"doorLeafWidth"},{name:"门扇高度",para:"doorLeafHeight"}],nameMap:{doorWidth:"门洞宽度",doorHeight:"门洞高度",doorLeafWidth:"门扇宽度",doorLeafHeight:"门扇高度"}}},computed:{data:function(){return this.list}},mounted:function(){this.isDoor&&this.isManager||this.columns.splice(this.columns.length-1,1),this.sleeve&&(this.columns=[{title:"名称",key:"name"},{title:"长度",key:"length"},{title:"宽度",key:"widthWord"},{title:"厚度",key:"thick"},{title:"厚度(备注)",key:"thickness"},{title:"数量",key:"num"}])},methods:{getClass:function(t){return t&&this.isDoor&&"width"===t?"fixed-width":"flex-1"},deleteItem:function(t){this.data.splice(t,1)},addItem:function(t){var e={name:"名称",length:0,lenPara:"doorLeafHeight",width:0,thick:5,num:1,type:0,thickType:"多层板",fixedFlag:!1};this.data.splice(t+1,0,e)},changeFixedFlag:function(t){var e=this.data[t];e.fixedFlag=!e.fixedFlag}}},Z=U,V=(n("3d6c"),Object(c["a"])(Z,Y,R,!1,null,null,null)),K=V.exports,tt={data:function(){return{id:"",tabValue:"soil",groupList:[],url:"",showPictureFlag:!1,imgUrl:"",algorithm:null,wordMap:{name:"填写名称",groupId:"选择分组",bigImg:"填写大图图片地址",smallImg:"填写小图图片地址"},isManager:common.isManager,groupMap:{}}},components:{MyTable:K},computed:{},mounted:function(){this.id=this.$route.query.id,this.id||(this.algorithm=this.cloneJson(I.algorithm)),this.getGroup()},methods:{initAlgorithm:function(t){this.algorithm=t},getGroup:function(){var t=this;common.get("classes/Group").then(function(e){t.groupList=e.results,t.groupList.forEach(function(e){t.groupMap[e.objectId]=e.title})})},cloneJson:function(t){return JSON.parse(v()(t))},addNew:function(){var t=this.algorithm.other[this.tabValue].length;this.$refs[this.tabValue].addItem(t)},showPicture:function(t){this.imgUrl=this.algorithm.baseInfo[t],this.showPictureFlag=!0},save:function(){var t=this;for(var e in this.algorithm.baseInfo){var n=this.algorithm.baseInfo[e];if(!n&&this.wordMap[e])return this.$Message.success("请"+this.wordMap[e]+"!")}var a=this.algorithm.baseInfo,i={groupId:a.groupId,title:a.name,info:a.info,algorithm:this.algorithm},o="/edit"===this.$route.path;o?common.update("classes/itemList/"+this.id,i).then(function(e){t.$Message.success("算法更新成功!")}):common.post("classes/itemList",i).then(function(e){t.$Message.success("算法保存成功!"),t.algorithm=t.cloneJson(I.algorithm)})}}},et=tt,nt=(n("0927"),Object(c["a"])(et,Q,X,!1,null,null,null)),at=nt.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editCalculation"},[n("new",{ref:"new"})],1)},ot=[],st={data:function(){return{}},components:{New:at},computed:{},mounted:function(){var t=this;this.$nextTick(function(){t.getAlgorithm()})},methods:{getAlgorithm:function(){var t=this,e=this.$route.query.id;common.get("classes/itemList/"+e).then(function(e){t.$refs.new.initAlgorithm(e.algorithm)})}}},rt=st,lt=Object(c["a"])(rt,it,ot,!1,null,null,null),ut=lt.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"limiter"},[n("div",{staticClass:"container-login100"},[n("div",{staticClass:"wrap-login100"},[t._m(0),n("form",{staticClass:"login100-form validate-form"},[n("span",{staticClass:"login100-form-title"},[t._v("\n\t\t\t\t\t用户登录\n\t\t\t\t")]),n("div",{staticClass:"wrap-input100 validate-input",attrs:{"data-validate":"Valid email is required: ex@abc.xyz"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input100",attrs:{type:"text",name:"email",placeholder:"账号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("span",{staticClass:"focus-input100"}),t._m(1)]),n("div",{staticClass:"wrap-input100 validate-input",attrs:{"data-validate":"Password is required"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input100",attrs:{type:"password",name:"pass",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("span",{staticClass:"focus-input100"}),t._m(2)]),n("div",{staticClass:"container-login100-form-btn"},[n("button",{staticClass:"login100-form-btn",attrs:{type:"button"},on:{click:t.login}},[t._v("\n\t\t\t\t\t\t登录\n\t\t\t\t\t")])]),n("div",{staticClass:"text-center p-t-12"}),n("div",{staticClass:"text-center p-t-136"})])])])])},dt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login100-pic js-tilt",attrs:{"data-tilt":""}},[a("img",{attrs:{src:n("0810"),alt:"IMG"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"symbol-input100"},[n("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"symbol-input100"},[n("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}})])}],ht=(n("f91a"),{data:function(){return{username:"",password:""}},mounted:function(){},methods:{login:function(){var t=this;if(this.username)if(this.password){var e="?username="+this.username+"&password="+this.password;common.get("login"+e).then(function(e){t.$set(common,"username",t.username),t.$set(common,"isManager",e.manager),localStorage.setItem("username",t.username),localStorage.setItem("isManager",e.manager),t.$Message.success("登录成功"),t.$router.replace({path:"/"})}).catch(function(e){console.log(e),t.$Message.info("账号密码不正确，请重新输入!")})}else this.$Message.info("请输入密码!");else this.$Message.info("请输入用户名!")}}}),mt=ht,ft=(n("f382"),Object(c["a"])(mt,ct,dt,!1,null,"04ff840e",null)),pt=ft.exports;o["default"].use(m["a"]);var gt=new m["a"]({routes:[{path:"/",name:"list",component:y},{path:"/input",name:"input",component:$},{path:"/new",name:"new",component:at},{path:"/edit",name:"edit",component:ut},{path:"/login",name:"login",component:pt}]}),vt=n("b7e4"),bt=n.n(vt),It=(n("638f"),n("7f43")),Lt=n.n(It);o["default"].use(bt.a),o["default"].config.productionTip=!1,window.axios=Lt.a;var kt="https://api2.bmob.cn/1/",wt={"X-Bmob-Application-Id":"d5007b04394aef4cdb48560e3a48c6bb","X-Bmob-REST-API-Key":"5bf0663149c84d47c3d5c8949e025815","Content-Type":"application/json"},yt={username:"",isManager:!1,get:function(t){return new i.a(function(e,n){Lt()({method:"get",url:kt+t,headers:wt}).then(function(t){e(t.data)}).catch(function(t){n(t)})})},post:function(t,e){return new i.a(function(n){Lt()({method:"post",url:kt+t,headers:wt,data:e}).then(function(t){200!==t.status&&201!==t.status||n(t.data)})})},delete:function(t,e){return new i.a(function(n){Lt()({method:"delete",url:kt+t,headers:wt,data:e}).then(function(t){console.log(t,"===========res========="),n(t.data)})})},update:function(t,e){return new i.a(function(n){Lt()({method:"put",url:kt+t,headers:wt,data:e}).then(function(t){console.log(t,"===========res========="),n(t.data)})})}};gt.beforeEach(function(t,e,n){n()});var xt=localStorage.getItem("username"),Ct=localStorage.getItem("isManager");xt&&(yt.username=xt),"true"===Ct?yt.isManager=!0:"false"===Ct&&(yt.isManager=!1),window.common=yt,new o["default"]({router:gt,render:function(t){return t(h)}}).$mount("#app")},"5a6c":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("2b2a"),i=n.n(a);i.a},"7fbe":function(t,e,n){t.exports=n.p+"img/big.78b67d7c.png"},"8d23":function(t,e,n){},"987c":function(t,e,n){},abcb:function(t,e,n){"use strict";var a=n("8d23"),i=n.n(a);i.a},ba27:function(t,e,n){"use strict";var a=n("ccee"),i=n.n(a);i.a},ccee:function(t,e,n){},ce77:function(t,e,n){"use strict";var a=n("5a6c"),i=n.n(a);i.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.7ba06c21.png"},f382:function(t,e,n){"use strict";var a=n("1b93"),i=n.n(a);i.a}});
//# sourceMappingURL=app.efdc2425.js.map