(function(t){function e(e){for(var a,s,r=e[0],l=e[1],u=e[2],d=0,h=[];d<r.length;d++)s=r[d],i[s]&&h.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/wool/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0810":function(t,e,n){t.exports=n.p+"img/img-01.3c46da04.png"},"0927":function(t,e,n){"use strict";var a=n("1c25"),i=n.n(a);i.a},1:function(t,e){},"1c25":function(t,e,n){},2:function(t,e){},"22a0":function(t,e,n){},"2b2a":function(t,e,n){},3:function(t,e){},"34dc":function(t,e,n){"use strict";var a=n("987c"),i=n.n(a);i.a},"3d6c":function(t,e,n){"use strict";var a=n("22a0"),i=n.n(a);i.a},4:function(t,e){},"4daf":function(t,e,n){t.exports=n.p+"img/outLogo.9a836562.png"},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("5c07"),n("53da"),n("2556"),n("d0f8");var a=n("6e6d"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.loginPage?t._e():a("div",{staticClass:"header"},[a("img",{staticClass:"logo",attrs:{src:n("cf05"),alt:"沃木木艺"}}),a("div",{staticClass:"right"},[a("Menu",{staticClass:"menu",attrs:{mode:"horizontal","active-name":t.activeIndex},on:{"on-select":t.changeMenu}},[a("MenuItem",{attrs:{name:"1"}},[a("Icon",{attrs:{type:"ios-paper"}}),t._v("\n              分类列表\n          ")],1),a("MenuItem",{attrs:{name:"2"}},[a("Icon",{attrs:{type:"ios-people"}}),t._v("\n              输入数据\n          ")],1)],1),a("div",{staticClass:"user"},[a("Dropdown",[a("Icon",{attrs:{type:"md-person"}}),t._v(" "+t._s(t.username)+"\n          "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(e){return t.logOut(e)}}},[t._v("退出登录")])],1)],1)],1)],1)]),a("router-view",{staticClass:"container",class:{"login-container":t.loginPage}})],1)},o=[],s={data:function(){return{pathList:["/","/input"],isManager:common.isManager,common:common}},mounted:function(){this.getManager()},computed:{activeIndex:function(){return this.pathList.indexOf(this.$route.path)+1+""},loginPage:function(){return"/login"==this.$route.path},username:function(){return common.username}},methods:{getManager:function(){this.username||this.loginPage||(this.$Message.info("请重新登录!"),this.$router.push({path:"/login"}))},changeMenu:function(t){this.$router.push({path:this.pathList[t-1]})},logOut:function(){localStorage.setItem("username",""),localStorage.setItem("isManager",""),common.username="",common.isManager=!1,this.$Message.success("退出登录成功"),this.$router.push({path:"/login"})}}},r=s,l=(n("5c0b"),n("17cc")),u=Object(l["a"])(r,i,o,!1,null,null,null),c=u.exports,d=n("1e6f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"seriesList"},[t.isManager?n("Button",{nativeOn:{click:function(e){t.newFlag=!0}}},[t._v("新建分组")]):t._e(),t.isManager?n("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.newItem(e)}}},[t._v("新建项目")]):t._e(),t._l(t.groupList,function(e,a){return n("div",{key:e.objectId,staticClass:"wrap"},[n("div",{staticClass:"title"},[t._v("\n        "+t._s(e.title)+"\n        "),t.isManager?n("div",{staticClass:"action",on:{click:function(e){return t.deleteGroup(a)}}},[t._v("删除分组")]):t._e()]),n("div",{staticClass:"card-wrap"},t._l(e.itemList,function(e,i){return n("Card",{key:i,class:{first:i%5===0},nativeOn:{click:function(e){return t.editItem(a,i)}}},[n("p",{staticStyle:{"margin-bottom":"0px","vertical-align":"middle"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))]),t.isManager?n("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extra"},slot:"extra"},[n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return e.stopPropagation(),t.deleteItem(a,i)}}})],1):t._e(),n("p",[t._v(t._s(e.info))])])}),1)])}),t._e(),n("Modal",{attrs:{title:"删除分组"},on:{"on-ok":t.confirmDeleteGroup},model:{value:t.deleteGroupFlag,callback:function(e){t.deleteGroupFlag=e},expression:"deleteGroupFlag"}},[n("p",[t._v("删除该分组会也会删除该分组下面的算法，确认删除？")])]),n("Modal",{attrs:{title:"删除算法"},on:{"on-ok":t.confirmDelete},model:{value:t.deleteFlag,callback:function(e){t.deleteFlag=e},expression:"deleteFlag"}},[n("p",[t._v("删除后不可恢复，确认要删除这个算法内容？")])]),n("Modal",{attrs:{title:"新建分组"},model:{value:t.newFlag,callback:function(e){t.newFlag=e},expression:"newFlag"}},[n("Input",{attrs:{placeholder:"请输入新建的分组名称"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{nativeOn:{click:function(e){t.newFlag=!1,t.newName=""}}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.confirmNewGroup(e)}}},[t._v("确认")])],1)],1)],2)},m=[],f=(n("612f"),{algorithm:{baseInfo:{name:"",groupId:"",info:"",doorLeafHeight:0,doorLeafWidth:0,bigImg:"",smallImg:"",doorLeafThick:0},other:{soil:[{name:"面板料",length:-40,lenPara:"doorLeafHeight",width:-40,fixedFlag:!1,lenFixedFlag:!1,thick:5,thickType:"多层板",num:2},{name:"顶部面板",length:-40,lenPara:"doorLeafHeight",width:-40,fixedFlag:!1,lenFixedFlag:!1,thick:5,thickType:"多层板",num:2},{name:"池板料",length:-20,lenPara:"doorLeafHeight",width:120,fixedFlag:!0,lenFixedFlag:!1,thick:12,thickType:"中纤板",num:2}],skin:[]},line:{normal:[{name:"横套线",length:0,lenPara:"doorWidth",width:null,thick:"内15",thickness:"",num:2},{name:"竖套线",length:0,lenPara:"doorHeight",width:null,thick:"内15",thickness:"",num:4}],three:[{name:"横套线",length:0,lenPara:"doorWidth",width:null,thick:"内15",thickness:"",num:1},{name:"竖套线",length:0,lenPara:"doorHeight",width:null,thick:"内15",thickness:"",num:2}]},door:[{name:"横挡条",length:-18,lenPara:"doorLeafWidth",width:{maxLen:50,fixedLen:113},thick:12,num:1,showCondition:!0},{name:"横主板",length:50,lenPara:"doorLeafWidth",width:0,thick:22,num:1},{name:"竖挡条",length:10,lenPara:"doorLeafHeight",width:{maxLen:50,fixedLen:113},thick:12,num:2,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:10,width:0,thick:22,num:2}],cupboardDoors:[{name:"横挡条",length:-18,lenPara:"doorLeafWidth",width:{maxLen:75,fixedLen:108},thick:12,num:1,showCondition:!0},{name:"横主板",length:50,lenPara:"doorLeafWidth",width:0,thick:22,num:1},{name:"竖挡条",length:10,lenPara:"doorLeafHeight",width:{maxLen:75,fixedLen:108},thick:12,num:2,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:10,width:0,thick:22,num:2}],openDoors:[{name:"横挡条",length:-18,lenPara:"doorLeafWidth",width:{maxLen:50,fixedLen:118},thick:12,num:1,showCondition:!0},{name:"横主板",length:50,lenPara:"doorLeafWidth",width:0,thick:22,num:1},{name:"竖挡条",length:10,lenPara:"doorLeafHeight",width:{maxLen:50,fixedLen:118},thick:12,num:2,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:10,width:0,thick:22,num:2}],windowCover:[{name:"窗套",lenPara:"doorHeight",length:0,width:0,thick:22,num:2},{name:"窗套",length:0,lenPara:"doorWidth",width:0,thick:22,num:1}],dumb:[{name:"三面哑口套",lenPara:"doorHeight",length:0,width:0,thick:22,num:2},{name:"三面哑口套",length:0,lenPara:"doorWidth",width:0,thick:22,num:1}]}}),p=f,g={data:function(){return{newName:"",newFlag:!1,deleteGroupFlag:!1,deleteFlag:!1,deleteIndex:null,groupList:[],groupMap:{}}},computed:{isManager:function(){return common.isManager}},mounted:function(){this.getGroup()},methods:{getGroup:function(){var t=this;common.get("classes/Group").then(function(e){var n=[];e.results.forEach(function(e){n.push(e.objectId),e.itemList=[],t.groupMap[e.objectId]=e}),t.getItemList(n)})},getItemList:function(t){var e=this,n={groupId:{$in:t}},a="?where="+JSON.stringify(n);a+="&keys=groupId,info,title,objectId",common.get("classes/itemList"+a).then(function(t){for(var n in t.results.forEach(function(t){e.groupMap[t.groupId].itemList.push(t)}),e.groupMap){var a=e.groupMap[n];e.groupList.push(a)}})},cloneJson:function(t){return JSON.parse(JSON.stringify(t))},confirmNewGroup:function(){var t=this;if(this.newName){this.newFlag=!1;var e=this.cloneJson(this.newName),n={title:e};common.post("classes/Group",n).then(function(n){t.newName="",t.groupList.push({objectId:n.objectId,title:e,itemList:[]}),t.$Message.success(e+"分组创建成功!")})}else this.$Message.info("请输入分组的名称!")},copy:function(t,e){var n=this.cloneJson(this.groupList[t].itemList[e]);this.groupList[t].itemList.splice(e,0,n),this.$Message.success("复制成功!")},deleteItem:function(t,e){this.deleteIndex={index:t,eleIndex:e},this.deleteFlag=!0},remove:function(t,e,n){var a=this.groupList[t].itemList.splice(e,1);this.groupList[n].itemList.push(a[0]),this.$Message.success("移动成功!")},confirmDelete:function(){var t=this,e=this.deleteIndex.index,n=this.deleteIndex.eleIndex,a=this.groupList[e].itemList;common.delete("classes/itemList/"+a[n].objectId).then(function(e){t.$Message.success("删除"+a[n].title+"成功!"),a.splice(n,1)})},deleteGroup:function(t){this.deleteIndex=t,this.deleteGroupFlag=!0},confirmDeleteGroup:function(){var t=this,e=this.groupList[this.deleteIndex],n=this.groupList[this.deleteIndex].objectId,a=[{method:"DELETE",path:"/1/classes/Group/"+n}];e.itemList.forEach(function(t){a.push({method:"DELETE",path:"/1/classes/itemList/"+t.objectId})}),common.post("batch",{requests:a}).then(function(e){t.groupList.splice(t.deleteIndex,1),t.$Message.success("删除分组成功!")})},editItem:function(t,e){var n=this.groupList[t].itemList[e];this.$router.push({path:"/edit",query:{id:n.objectId}})},seeInfo:function(){},newItem:function(){this.$router.push({path:"/new"})}}},v=g,b=(n("abcb"),Object(l["a"])(v,h,m,!1,null,null,null)),I=b.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"backData"},[n("div",{staticClass:"inpuWrap"},[n("Card",{staticClass:"base-info"},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("数据录入")]),n("Form",{attrs:{model:t.baseInfo,"label-width":80}},[n("FormItem",{staticClass:"one-four",attrs:{label:"订单号"}},[n("Input",{attrs:{placeholder:"请输入订单号"},model:{value:t.baseInfo.orderNum,callback:function(e){t.$set(t.baseInfo,"orderNum",e)},expression:"baseInfo.orderNum"}})],1),n("FormItem",{staticClass:"one-four",attrs:{label:"分组"}},[n("Select",{on:{"on-change":t.changeStyle},model:{value:t.doorStyleIndex,callback:function(e){t.doorStyleIndex=e},expression:"doorStyleIndex"}},t._l(t.groupList,function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.title))])}),1)],1),n("FormItem",{staticClass:"one-four",attrs:{label:"款式"}},[n("Select",{model:{value:t.doorTypeIndex,callback:function(e){t.doorTypeIndex=e},expression:"doorTypeIndex"}},t._l(t.doorTypeList,function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.title))])}),1)],1),n("FormItem",{staticClass:"one-four",attrs:{label:"套线型号"}},[n("Input",{attrs:{placeholder:"请输入套线型号"},model:{value:t.baseInfo.lineType,callback:function(e){t.$set(t.baseInfo,"lineType",e)},expression:"baseInfo.lineType"}})],1),t.isEFlag?n("FormItem",{staticClass:"one-four",attrs:{label:"拼接角度"}},[n("Select",{model:{value:t.baseInfo.angle,callback:function(e){t.$set(t.baseInfo,"angle",e)},expression:"baseInfo.angle"}},t._l(t.angleList,function(e,a){return n("Option",{key:a,attrs:{value:e}},[t._v(t._s(e))])}),1)],1):t._e(),t.isEFlag?n("FormItem",{staticClass:"one-four",attrs:{label:"竖套线厚度"}},[n("InputNumber",{attrs:{placeholder:"请输入竖套线厚度"},model:{value:t.baseInfo.verLineTick,callback:function(e){t.$set(t.baseInfo,"verLineTick",e)},expression:"baseInfo.verLineTick"}})],1):t._e(),t.isEFlag?n("FormItem",{staticClass:"one-four",attrs:{label:"横套线厚度"}},[n("InputNumber",{attrs:{placeholder:"请输入横套线厚度"},model:{value:t.baseInfo.acrossLineTick,callback:function(e){t.$set(t.baseInfo,"acrossLineTick",e)},expression:"baseInfo.acrossLineTick"}})],1):t._e(),n("FormItem",{staticClass:"one-four",attrs:{label:"材质类型"}},[n("Select",{model:{value:t.baseInfo.materialType,callback:function(e){t.$set(t.baseInfo,"materialType",e)},expression:"baseInfo.materialType"}},t._l(t.materialList,function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),n("FormItem",{staticClass:"one-four",attrs:{label:"材质"}},[n("Input",{attrs:{placeholder:"请输入材质"},model:{value:t.baseInfo.material,callback:function(e){t.$set(t.baseInfo,"material",e)},expression:"baseInfo.material"}})],1),n("FormItem",{staticClass:"one-four",attrs:{label:"颜色"}},[n("Input",{attrs:{placeholder:"请输入颜色"},model:{value:t.baseInfo.color,callback:function(e){t.$set(t.baseInfo,"color",e)},expression:"baseInfo.color"}})],1),n("FormItem",{staticClass:"one-four",attrs:{label:"脚墩高度"}},[n("InputNumber",{attrs:{placeholder:"请输入脚墩高度"},model:{value:t.baseInfo.footPierHeight,callback:function(e){t.$set(t.baseInfo,"footPierHeight",e)},expression:"baseInfo.footPierHeight"}})],1),n("FormItem",{staticClass:"half",attrs:{label:"客户地址"}},[n("Input",{attrs:{placeholder:"请输入客户地址"},model:{value:t.baseInfo.address,callback:function(e){t.$set(t.baseInfo,"address",e)},expression:"baseInfo.address"}})],1)],1)],1),n("my-input-table",{on:{addNew:t.addNew}}),n("Card",{staticStyle:{"margin-top":"30px"}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                录入表格\n            ")]),n("Table",{attrs:{columns:t.columns,data:t.outDataList}})],1),n("div",{staticClass:"next-wrap"},[n("Button",{attrs:{type:"primary"},on:{click:t.showData}},[t._v("生成数据")])],1)],1),n("div",{staticClass:"img-wrap",attrs:{id:"bigCanvas"}}),n("div",{staticClass:"img-wrap",attrs:{id:"smallCanvas"}}),t.doorTypeList[t.doorTypeIndex]?n("output-data",{ref:"outputData"}):t._e()],1)},y=[],w=(n("ea65"),n("3a23"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"tableWrap inputWrap"},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("数据录入")]),n("div",{staticClass:"table-header flex flex-wrap"},t._l(t.columns,function(e,a){return n("div",{key:a,staticClass:"table-item flex-1"},["footPier"===e.key?n("Poptip",{attrs:{trigger:"hover",width:"200","word-wrap":"",title:"脚墩数量",content:"填写4代表4条都有脚墩，2-0，代表外到顶有2个脚墩，内到顶没有脚墩"}},[t._v("\n                "+t._s(e.title)+"\n            ")]):n("span",[t._v(t._s(e.title))])],1)}),0),t._l(t.inputList,function(e,a){return n("div",{key:a,staticClass:"table-row flex flex-wrap"},t._l(t.columns,function(i,o){return n("div",{key:o,staticClass:"table-item flex-1"},["action"===i.key?n("div",[n("Button",{attrs:{type:"primary"},nativeOn:{click:function(n){return t.addNew(e,a)}}},[t._v("添加")])],1):t._e(),"name"===i.key?n("span",[t._v("\n                    "+t._s(e[i.key])+"：\n                ")]):t._e(),"action"!==i.key&&"name"!==i.key?n("div",["doorLeafThick"===i.key?n("div",["房门连套"===e.name?n("InputNumber",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[ele.key]"}}):t._e()],1):t._e(),"footPier"===i.key?n("div",["三面窗套"!==e.name?n("Input",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[ele.key]"}}):t._e()],1):t._e(),"doorLeafThick"!==i.key&&"footPier"!==i.key?n("div",["三面窗套"!==e.name?n("InputNumber",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[ele.key]"}}):t._e(),"三面窗套"===e.name&&"innerToTop"!==i.key?n("InputNumber",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[ele.key]"}}):t._e()],1):t._e()]):t._e()])}),0)})],2)}),x=[],L={data:function(){return{notInput:["action"],inputList:[{name:"房门连套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,doorLeafThick:45,outToTop:null,innerToTop:null,footPier:null},{name:"三面哑口套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,outToTop:null,innerToTop:null,footPier:null},{name:"三面窗套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,outToTop:null},{name:"柜门连套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,outToTop:null,innerToTop:null,footPier:null},{name:"对开门连套",doorHeight:null,doorWidth:null,doorThick:null,doorLeafHeight:null,doorLeafWidth:null,outToTop:null,innerToTop:null,footPier:null}],columns:[{title:"名称",key:"name"},{title:"门洞高",key:"doorHeight"},{title:"门洞宽",key:"doorWidth"},{title:"门洞厚",key:"doorThick"},{title:"外到顶",key:"outToTop"},{title:"内到顶",key:"innerToTop"},{title:"脚墩数量",key:"footPier"},{title:"操作",key:"action"}],nulllMap:{outToTop:!0,innerToTop:!0,doorLeafHeight:!0,doorLeafWidth:!0,footPier:!0},wordMap:{name:"名字",doorHeight:"门洞高度",doorWidth:"门洞宽度",doorThick:"门洞厚度"}}},computed:{},mounted:function(){},methods:{cloneJson:function(t){return JSON.parse(JSON.stringify(t))},addNew:function(t,e){for(var n in t)if(!this.nulllMap[n]&&!t[n])return void this.$Message.info("请输入"+this.wordMap[n]+"!");for(var a in this.$emit("addNew",this.cloneJson(t)),this.inputList[e])"name"!==a&&(this.inputList[e][a]=null);0===e&&(this.inputList[e].doorLeafThick=45)}}},_=L,T=(n("34dc"),Object(l["a"])(_,w,x,!1,null,null,null)),C=T.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outPutData"})},P=[],F=n("1a83"),$={data:function(){return{baseInfo:null,algorithm:null,inputList:[]}},computed:{},mounted:function(){},methods:{cloneJson:function(t){return JSON.parse(JSON.stringify(t))},initData:function(t,e,n){this.baseInfo=t,this.algorithm=e,this.inputList=n,this.dealAlgorithm()},outPutExcel:function(){var t=this;F.fromBlankAsync().then(function(e){t.dealOrderStyle(e)}),F.fromBlankAsync().then(function(e){t.dealLineStyle(e)}),F.fromBlankAsync().then(function(e){t.dealPartsStyle(e)})},dealOrderStyle:function(t){var e=t.sheet(0),n=16,a=18,i={1:5,2:n,3:n,4:11,5:n+1,6:9,7:20,8:20,9:8,10:n+1.5},o=3,s=3;e.range("A1:J1").merged(!0).value("浙江沃家家具有限公司订货单").style({verticalAlignment:"center",horizontalAlignment:"center",fontSize:22}),e.name="订货单",e.range("A2:C2").merged(!0).value("订单编号").style({verticalAlignment:"center",horizontalAlignment:"center",border:!0,fontSize:12}),e.cell("D2").value([["经销商","","","","","品牌以及包装",""],["客户地址",this.baseInfo.address,"","","","尺寸单位:mm(毫米)",""]]).style({verticalAlignment:"center",border:!0}),e.range("E3:H3").style({verticalAlignment:"center",fontSize:20}),e.range("E2:H2").merged(!0),e.range("I2:J2").merged(!0),e.range("E3:H3").merged(!0),e.range("I3:J3").merged(!0),e.range("A3:C3").merged(!0).value(this.baseInfo.orderNum).style({verticalAlignment:"center",horizontalAlignment:"center",border:!0,fontSize:20});var r=this.outPutOrder();for(var l in e.cell("A4").value(r).style({border:!0,verticalAlignment:"center",fontSize:12}),s+=r.length,i)e.column(parseInt(l)).width(i[l]).hidden(!1);e.row(1).height(57.6).hidden(!1),e.row(2).height(20).hidden(!1),e.row(3).height(36).hidden(!1),e.range(s,1,s,10).merged(!0).style({verticalAlignment:"left",horizontalAlignment:"center",border:!0}),r.forEach(function(t,n){e.row(n+o+1).height(a).hidden(!1)}),e.row(s).height(40).hidden(!1),this.downloadFile(t,"订货单",r.length+2)},dealPartsStyle:function(t){var e=t.sheet(0),n=this.outPutParts(),a=n.data;e.cell("A2").value(a).style({border:!0,verticalAlignment:"center",fontSize:12}),this.setCommonStyle(t,a),n.merges.forEach(function(t,n){var a=t+1;e.range(a,1,a,4).merged(!0).style({verticalAlignment:"center",horizontalAlignment:"center",border:!0,bold:!0}),e.range(a,5,a,6).merged(!0)}),this.downloadFile(t,"部件部分",a.length)},setCommonStyle:function(t,e){var n=e.length+1,a=18,i=t.sheet(0),o={1:5,2:13,3:20,4:15,5:10,6:18,7:15};for(var s in i.range("A1:G1").merged(!0).value("浙江沃家家具有限公司订货单").style({verticalAlignment:"center",horizontalAlignment:"center",fontSize:18}),o)i.column(parseInt(s)).width(o[s]).hidden(!1);e.forEach(function(t,e){i.row(e+2).height(a).hidden(!1)}),i.row(1).height(44).hidden(!1),i.row(n).height(36).hidden(!1),i.range(n,1,n,7).merged(!0)},dealLineStyle:function(t){var e=t.sheet(0),n=this.outPutLineOrder(),a=n.length+1;e.column(4).width(9).hidden(!1),e.column(5).width(12).hidden(!1),e.column(7).width(14).hidden(!1),e.cell("A2").value(n).style({border:!0,verticalAlignment:"center",fontSize:12}),e.range(a-1,1,a-1,4).merged(!0).style({bold:!0,horizontalAlignment:"center"}),e.range(a-1,5,a-1,6).merged(!0),this.setCommonStyle(t,n),this.downloadFile(t,"部件汇总(套线部分)",n.length)},downloadFile:function(t,e,n){e=this.baseInfo.orderNum+"-"+e;var a=t.sheet(0),i=1/2.54;a.column(1).style({verticalAlignment:"center",horizontalAlignment:"center"}),a.row(n+1).cell(1).style({horizontalAlignment:"left"}),a.pageMargins("top",i),a.pageMargins("bottom",i),a.pageMargins("left",i),a.pageMargins("right",i),t.outputAsync().then(function(t){if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t,e+".xlsx");else{var n=window.URL.createObjectURL(t),a=document.createElement("a");document.body.appendChild(a),a.href=n,a.download=e+".xlsx",a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a)}})},dealAlgorithm:function(){var t=this.baseInfo,e=this.algorithm,n=e.line,a=t.lineType,i=parseInt(a.substr(1,a.length)),o=t.verLineTick,s=t.acrossLineTick,r=0===a.indexOf("E");for(var l in n)for(var u in n[l]){var c=n[l][u],d="横套线"===c.name;c.width=i,r&&(c.thickness=d?s:o,c.thickness="厚度"+c.thickness)}this.outPutExcel()},getHWTInfo:function(t,e,n,a){var i=t+"*"+e+"*"+n;return a&&(i+="="+a),i},outPutOrder:function(){var t=this,e=this.baseInfo,n=["序号","位置及名称","门型","材质","颜色","套线型号","门洞尺寸(高*宽*墙厚)","门扇尺寸(高*宽*墙厚)","数量","备注"],a=[n];return this.inputList.forEach(function(n,i){var o=t.getHWTInfo(n.doorHeight,n.doorWidth,n.doorThick),s=t.getHWTInfo(n.doorLeafHeight,n.doorLeafWidth,t.algorithm.baseInfo.doorLeafThick),r=t.algorithm.baseInfo.name,l="";"房门连套"!==n.name&&(s="",r=""),(n.outToTop||n.innerToTop)&&(l=n.outToTop&&n.innerToTop?"双面门头板":"单面门头板"),a.push([n.index,n.name,r,e.material,e.color,e.lineType,o,s,"1套",l])}),a.push(["生产备注:","","","","","","","","","",""]),a},outPutbasePartsData:function(t,e){var n=this,a={"房门连套":"door","柜门连套":"cupboardDoors","对开门连套":"openDoors","三面窗套":"windowCover","三面哑口套":"dumb"},i={"房门连套":!0,"柜门连套":!0,"对开门连套":!0},o=[],s=0;return this.inputList.forEach(function(r,l){var u=r.name,c=n.algorithm[a[u]],d=0,h=[];c.forEach(function(t,e){var a="多层板"+t.thick+"mm",l=r[t.lenPara]+t.length,u=r.doorThick+parseInt(t.width),c=[r.index,n.baseInfo.orderNum+"-"+r.index,n.baseInfo.material,a];if(i[r.name])t.name.indexOf("挡条")>-1&&(u=r.doorThick>=t.width.fixedLen?t.width.maxLen:t.width.maxLen-(t.width.fixedLen-r.doorThick)),22===parseInt(t.thick)&&(d+=t.num),h.push(c.concat([t.name,n.getHWTInfo(l,u,t.thick,t.num),""]));else{var m=n.getHWTInfo(l,u,t.thick,t.num);22===parseInt(t.thick)&&(s+=t.num);var f=r.name.indexOf("窗套")>-1?"窗套":"哑口";o.push(c.concat([f,m,""]))}}),h.length>0&&(t=t.concat(h),t.push(["门框  多层板22mm小计","","","",d,"",""]),e.push(t.length))}),o.length>0&&(t=t.concat(o),t.push(["哑口 多层板22mm小计","","","",s,"",""]),e.push(t.length)),t.push(["生产备注：","","","","","",""]),{data:t,merges:e}},outPutParts:function(){var t=this,e={},n=this.baseInfo,a=this.algorithm.other,i=[],o=[],s=[],r="混油"===n.materialType;r?i=a.soil:a.skin.forEach(function(t){"大门"===t.doorType?o.push(t):s.push(t)}),this.inputList.forEach(function(n,a){"房门连套"===n.name&&(r||(i=n.doorLeafWidth>=750?o:s),i.forEach(function(a){var i=t.cloneJson(a),o=i.thickType+i.thick+"mm";e[o]||(e[o]=[]);var s=n[i.lenPara]+i.length,r=i.fixedFlag?i.width:n.doorLeafWidth+i.width;i.thickInfo=o,i.info=t.getHWTInfo(s,r,i.thick,i.num),i.index=n.index,e[o].push(i)}))});var l=["序号","生产单号","材质","材料","部件","长*宽*厚=数量","备注"],u=[l],c=[],d=function(n){var a=e[n],i=a.length,o=0;a.forEach(function(e,n){u.push([e.index,t.baseInfo.orderNum+"-"+e.index,t.baseInfo.material,e.thickInfo,e.name,e.info,""]),o+=e.num,n===i-1&&(u.push([e.thickInfo,"","","",o,"",""]),c.push(u.length))})};for(var h in e)d(h);return this.outPutbasePartsData(u,c)},outPutLineOrder:function(){var t=this,e=this.baseInfo,n=this.algorithm.line,a=["序号","生产单号","材质","套线型号","部件","长*宽*厚=数量","备注"],i=[a],o=0;return this.inputList.forEach(function(a,s){var r="三面窗套"===a.name?"three":"normal",l=[a.index,e.orderNum+"-"+a.index,e.material,e.lineType],u=[],c=null;if(a.footPier){var d=a.footPier.split("-");c={len:d.length,list:d,f:parseInt(d[0]),e:parseInt(d[1])}}n[r].forEach(function(e){var n=e.name.indexOf("横")>-1,i=e.name,s=e.width,d=e.thick,h=e.num,m=e.thickness,f=a[e.lenPara]+e.length;if(f+=n?2*e.width:e.width,o+=h,n){var p=0===t.baseInfo.lineType.indexOf("E");p&&90===t.baseInfo.angle&&(f=a.doorWidth);var g=t.getHWTInfo(f,s,d,h);u.push(l.concat([i,g,m]))}else if("three"===r){a.outToTop&&(f=a.outToTop+20);var v=t.getHWTInfo(f,s,d,h);u.push(l.concat([i,v,m]))}else if(a.outToTop||a.innerToTop){var b=t.getHWTInfo(f,s,d,h/2),I=t.getHWTInfo(f,s,d,h/2),k=null;if(a.outToTop){var y=a.outToTop+20;c&&(2===c.len&&2===c.f||1===c.len&&4===c.f)&&(y-=parseInt(t.baseInfo.footPierHeight)),b=t.getHWTInfo(y,s,d,h/2)}if(a.innerToTop){var w=a.innerToTop+20;c&&(2===c.len&&2===c.e||1===c.len&&4===c.f)&&(w-=parseInt(t.baseInfo.footPierHeight)),I=t.getHWTInfo(w,s,d,h/2),k=w}b===I?u.push(l.concat([i,t.getHWTInfo(k,s,d,h),m])):(u.push(l.concat([i,b,m])),u.push(l.concat([i,I,m])))}else{c&&4===c.s&&(f-=parseInt(t.baseInfo.footPierHeight));var x=t.getHWTInfo(f,s,d,h);u.push(l.concat([i,x,m]))}}),i=i.concat(u)}),i.push(["套线"+e.lineType+"小计","","","",o,"",""]),i.push(["生产备注：","","","","","",""]),i},dealFootHeight:function(t){},setColWidth:function(t){var e=[];return t.forEach(function(t){e.push({wch:t})}),e},setRowHeight:function(t){var e=[];return t.forEach(function(t){e.push({hpt:20})}),e}}},H=$,S=(n("ce77"),Object(l["a"])(H,M,P,!1,null,null,null)),W=S.exports,N=n("5f03"),O=n.n(N),E=(n("d72d"),n("4daf"),{components:{MyInputTable:C,OutputData:W},data:function(){var t=this;return{downloadFlag:!1,showPicture:!1,groupList:[],materialList:["贴皮","混油"],angleList:[90,45],outLogo:null,doorStyleIndex:0,doorTypeIndex:0,baseInfo:{orderNum:"",lineType:"",doorStyle:"",doorType:"",angle:90,verLineTick:"",acrossLineTick:"",materialType:"混油",material:"",color:"",address:"",footPierHeight:null},columns:[{title:"序号",key:"index",width:60,align:"center",render:function(e,n){return e("InputNumber",{props:{type:"text",value:t.outDataList[n.index].index},style:{width:"40px"},on:{"on-change":function(e){t.outDataList[n.index].index=e}}})}},{title:"位置及名称",key:"name"},{title:"门洞尺寸(长*宽*厚)",render:function(e,n){var a=n.row,i=t.getHWTInfo(a.doorHeight,a.doorWidth,a.doorThick);return e("div",i)}},{title:"门扇尺寸(长*宽*厚)",render:function(e,n){var a=n.row,i=t.getHWTInfo(a.doorLeafHeight,a.doorLeafWidth,t.algorithm.baseInfo.doorLeafThick);return"房门连套"!==a.name&&(i=""),e("div",i)}},{title:"外到顶高度",key:"outToTop"},{title:"内到顶高度",key:"innerToTop"},{title:"脚墩数量",key:"footPier"},{title:"操作",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){t.outDataList.splice(n.index,1)}}},"删除")])}}],outDataList:[],groupMap:{},bigList:[],smallList:[],bigCanvas:null,smallCanvas:null}},computed:{isEFlag:function(){return"E"===this.baseInfo.lineType.substring(0,1)},algorithm:function(){if(this.doorTypeList.length>0)return this.doorTypeList[this.doorTypeIndex].algorithm},doorTypeList:function(){return this.groupList.length>0?this.groupList[this.doorStyleIndex].itemList:[]},bigImg:function(){return this.algorithm?this.algorithm.baseInfo.bigImg:""},smallImg:function(){return this.algorithm?this.algorithm.baseInfo.smallImg:""},username:function(){return common.username}},mounted:function(){this.getGroup(),this.outLogo=n("4daf")},methods:{getGroup:function(){var t=this;common.get("classes/Group").then(function(e){var n=[];e.results.forEach(function(e){n.push(e.objectId),e.itemList=[],t.groupMap[e.objectId]=e}),t.getItemList(n)})},getItemList:function(t){var e=this,n={groupId:{$in:t}},a="?where="+JSON.stringify(n);common.get("classes/itemList"+a).then(function(t){for(var n in t.results.forEach(function(t){e.groupMap[t.groupId].itemList.push(t)}),e.groupMap){var a=e.groupMap[n];e.groupList.push(a)}})},getCanvas:function(t){var e="bigCanvas"===t,n=document.getElementById(t),a=this,i=new Image,o=this.baseInfo;i.setAttribute("crossOrigin","Anonymous"),i.src=this.bigImg+"?"+(new Date).getTime();var s=new Image;s.src=a.outLogo,i.onload=function(){O()(n,{width:4e3,height:3e3}).then(function(t){var n=t.getContext("2d");n.fillStyle="#000";var r=4e3,l=1300,u=3e3,c=0;n.lineWidth="5",n.rect(0,0,4500,3375),n.rect(150,150,4200,3030),n.stroke(),n.font="60px Arial",n.drawImage(i,160,160,r,r*i.height/i.width),n.drawImage(s,300,3195,680,155.5),n.fillText("制图人:"+common.username,3800,3305),a.drawText("订单号:"+o.orderNum,150,c,800,n),a.drawText("地址:"+o.address,1100,c,1800,n),a.drawText("颜色:"+o.material+o.color,3e3,c,1200,n),n.fillText("房门尺寸:",u,l);var d=e?"bigList":"smallList";a[d].forEach(function(t){l+=120,n.fillText(t.index+"#   "+t.info,u,l)}),t.toBlob(function(t){var n=e?"-big":"-small";saveAs(t,a.baseInfo.orderNum+n+".png")})})}},drawText:function(t,e,n,a,i){var o=t.split(""),s="",r=[];i.font="60px Arial",i.fillStyle="#000",i.textBaseline="middle";for(var l=0;l<o.length;l++)i.measureText(s).width<a||(r.push(s),s=""),s+=o[l];r.push(s);for(var u=0,c=0;c<r.length;c++)u+=1===c?100:60,i.fillText(r[c],e,n+20*(c+1)+u)},showData:function(){this.getList(),this.$Message.loading({content:"开始下载文件...",duration:3}),this.getCanvas("bigCanvas"),this.getCanvas("smallCanvas"),this.$refs.outputData.initData(this.baseInfo,this.doorTypeList[this.doorTypeIndex].algorithm,this.outDataList)},changeStyle:function(t){this.doorTypeList=this.groupList[t].itemList},addNew:function(t){var e=this.algorithm.baseInfo,n=this.outDataList.length;t.doorLeafHeight=t.doorHeight+e.doorLeafHeight,t.doorLeafWidth=t.doorWidth+e.doorLeafWidth,t.index=0===n?1:this.outDataList[n-1].index+1,this.outDataList.push(t)},getList:function(){var t=this;this.bigList=[],this.smallList=[],this.outDataList.forEach(function(e){if("房门连套"===e.name){var n=e.doorLeafHeight+"*"+e.doorLeafWidth+"*"+t.algorithm.baseInfo.doorLeafThick+"=1";e.doorLeafWidth>=750?t.bigList.push({index:e.index,info:n}):t.smallList.push({index:e.index,info:n})}})},getHWTInfo:function(t,e,n,a){var i=t+"*"+e+"*"+n;return a&&(i+="="+a),i}}}),A=E,D=(n("ba27"),Object(l["a"])(A,k,y,!1,null,null,null)),j=D.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"newCalculation"},[t.algorithm?n("div",{staticClass:"cardWrap"},[n("Breadcrumb",{staticStyle:{"margin-bottom":"10px"}},[n("BreadcrumbItem",{attrs:{to:"/"}},[t._v("首页")]),n("BreadcrumbItem",[t.isManager?n("span",[t._v(t._s(t.id?"编辑":"新建"))]):t._e(),t._v("算法信息")])],1),n("Card",[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n                基本信息\n                "),t.isManager?n("Button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:t.save}},[t._v("保存算法")]):t._e()],1),n("Form",{attrs:{model:t.algorithm.baseInfo,"label-width":80}},[n("FormItem",{staticClass:"one-four",attrs:{label:"名称"}},[t.isManager?n("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.algorithm.baseInfo.name,callback:function(e){t.$set(t.algorithm.baseInfo,"name",e)},expression:"algorithm.baseInfo.name"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.name))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"分组"}},[t.isManager?n("Select",{model:{value:t.algorithm.baseInfo.groupId,callback:function(e){t.$set(t.algorithm.baseInfo,"groupId",e)},expression:"algorithm.baseInfo.groupId"}},t._l(t.groupList,function(e){return n("Option",{key:e.title,attrs:{value:e.objectId}},[t._v(t._s(e.title))])}),1):n("span",[t._v(t._s(t.groupMap[t.algorithm.baseInfo.groupId]))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"简介"}},[t.isManager?n("Input",{attrs:{placeholder:"请输入简介"},model:{value:t.algorithm.baseInfo.info,callback:function(e){t.$set(t.algorithm.baseInfo,"info",e)},expression:"algorithm.baseInfo.info"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.info))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"门扇宽度 ="}},[t._v("\n                    门洞宽度 "),t.isManager?n("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇宽度"},model:{value:t.algorithm.baseInfo.doorLeafWidth,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafWidth",e)},expression:"algorithm.baseInfo.doorLeafWidth"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafWidth>0?"+"+t.algorithm.baseInfo.doorLeafWidth:t.algorithm.baseInfo.doorLeafWidth))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"门扇高度 ="}},[t._v("\n                    门洞高度 "),t.isManager?n("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇高度"},model:{value:t.algorithm.baseInfo.doorLeafHeight,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafHeight",e)},expression:"algorithm.baseInfo.doorLeafHeight"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafHeight>0?"+"+t.algorithm.baseInfo.doorLeafHeight:t.algorithm.baseInfo.doorLeafHeight))])],1),n("FormItem",{staticClass:"one-four",attrs:{label:"门扇厚度"}},[t.isManager?n("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇厚度"},model:{value:t.algorithm.baseInfo.doorLeafThick,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafThick",e)},expression:"algorithm.baseInfo.doorLeafThick"}}):n("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafThick>0?"+"+t.algorithm.baseInfo.doorLeafThick:t.algorithm.baseInfo.doorLeafThick))])],1),t.isManager?n("FormItem",{staticClass:"one-four",attrs:{label:"大图"}},[n("Upload",{attrs:{action:t.uploadFileUrl,accept:"image/png, image/jpeg, image/jpg",format:["jpg","jpeg","png"],"before-upload":t.beforeUpload}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"},nativeOn:{click:function(e){t.uploadImgName="bigImg"}}},[t._v("上传大图")])],1)],1):t._e(),t.isManager?n("FormItem",{staticClass:"one-four",attrs:{label:"小图"}},[n("Upload",{attrs:{action:t.uploadFileUrl,accept:"image/png, image/jpeg, image/jpg",format:["jpg","jpeg","png"],"before-upload":t.beforeUpload}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"},nativeOn:{click:function(e){t.uploadImgName="smallImg"}}},[t._v("上传小图")])],1)],1):t._e(),n("div"),n("FormItem",{staticClass:"one-four",attrs:{label:"大图"}},[n("div",{staticClass:"img-wrap"},[t.algorithm.baseInfo.bigImg?n("img",{attrs:{src:t.url+t.algorithm.baseInfo.bigImg,alt:""},on:{click:function(e){return t.showPicture("bigImg")}}}):t._e()])]),n("FormItem",{staticClass:"one-four",attrs:{label:"小图"}},[n("div",{staticClass:"img-wrap"},[t.algorithm.baseInfo.smallImg?n("img",{attrs:{src:t.url+t.algorithm.baseInfo.smallImg,alt:""},on:{click:function(e){return t.showPicture("smallImg")}}}):t._e()])])],1)],1),n("Card",{staticClass:"door-card"},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("房门算法信息")]),n("Button",{staticClass:"add",nativeOn:{click:function(e){return t.addNew(e)}}},[t._v("新增")]),n("Tabs",{model:{value:t.tabValue,callback:function(e){t.tabValue=e},expression:"tabValue"}},[n("TabPane",{attrs:{label:"混油",name:"soil"}},[n("my-table",{ref:"soil",attrs:{list:t.algorithm.other.soil,doorName:"soil",isDoor:!0}})],1),n("TabPane",{attrs:{label:"贴皮",name:"skin"}},[n("my-table",{ref:"skin",attrs:{list:t.algorithm.other.skin,doorName:"skin",isDoor:!0}})],1)],1)],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                门框算法信息\n                "),n("span",{staticClass:"condition-info"},[t._v(t._s(t.word))])]),n("my-table",{ref:"door",attrs:{list:t.algorithm.door}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                柜门连套算法信息\n                ")]),n("my-table",{ref:"cupboardDoors",attrs:{list:t.algorithm.cupboardDoors}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                对开门连套算法信息\n                ")]),n("my-table",{ref:"openDoors",attrs:{list:t.algorithm.openDoors}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("三面窗套算法信息")]),n("my-table",{ref:"windowCover",attrs:{list:t.algorithm.windowCover}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("三面哑口套算法信息")]),n("my-table",{ref:"pass",attrs:{list:t.algorithm.dumb}})],1),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("套线算法信息")]),n("div",{staticClass:"title"},[t._v("\n                    房门连套套线、三面垭口套套线、对开门套线、柜门连套套线\n                ")]),n("my-table",{ref:"pass",attrs:{list:t.algorithm.line.normal,sleeve:!0}}),n("div",{staticClass:"title"},[t._v("\n                    三面窗套套线\n                ")]),n("my-table",{ref:"pass",attrs:{list:t.algorithm.line.three,sleeve:!0}})],1)],1):t._e(),n("Modal",{attrs:{title:"查看大图"},model:{value:t.showPictureFlag,callback:function(e){t.showPictureFlag=e},expression:"showPictureFlag"}},[n("div",{staticClass:"big-picture"},[t.imgUrl?n("img",{attrs:{src:t.imgUrl}}):t._e()])])],1)},J=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tableWrap"},[n("div",{staticClass:"table-header flex flex-wrap"},t._l(t.columns,function(e,a){return n("div",{key:a,staticClass:"table-item",class:t.getClass(e.key)},[t._v("\n            "+t._s(e.title)+"\n        ")])}),0),t._l(t.data,function(e,a){return n("div",{key:a,staticClass:"table-row flex flex-wrap"},t._l(t.columns,function(i,o){return n("div",{key:o,staticClass:"table-item",class:t.getClass(i.key)},["name"===i.key?n("div",[t.isManager?n("Input",{model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}}):n("span",[t._v(t._s(e.name))])],1):t._e(),"doorType"===i.key?n("div",[t.isManager?n("Select",{staticStyle:{width:"85px"},attrs:{transfer:""},model:{value:e.doorType,callback:function(n){t.$set(e,"doorType",n)},expression:"item.doorType"}},t._l(t.doorTypeList,function(e,a){return n("Option",{key:a,attrs:{value:e}},[t._v(t._s(e))])}),1):t._e()],1):t._e(),"length"===i.key?n("div",[t.isDoor&&e.lenFixedFlag?t._e():n("div",{staticStyle:{display:"inline-block"}},[t.isManager?n("Select",{staticStyle:{width:"85px"},attrs:{transfer:""},model:{value:e.lenPara,callback:function(n){t.$set(e,"lenPara",n)},expression:"item.lenPara"}},t._l(t.nameList,function(e){return n("Option",{key:e.para,attrs:{value:e.para}},[t._v(t._s(e.name))])}),1):n("span",[t._v(t._s(t.nameMap[e.lenPara]))])],1),t.isManager?n("InputNumber",{model:{value:e.length,callback:function(n){t.$set(e,"length",n)},expression:"item.length"}}):n("span",[t._v(t._s(e.length>=0?"+"+e.length:e.length))]),t.sleeve?n("span",[t._v("\n                        + "+t._s(e.name.indexOf("横")>-1?2:1)+"x套线宽度\n                    ")]):t._e(),t.isDoor&&t.isManager?n("i-switch",{model:{value:e.lenFixedFlag,callback:function(n){t.$set(e,"lenFixedFlag",n)},expression:"item.lenFixedFlag"}}):t._e()],1):t._e(),"widthWord"===i.key?n("div",[t._v("\n                    与型号相关\n                ")]):t._e(),"width"===i.key?n("div",[e.showCondition?n("div",[t._v("\n                        条件宽度: "),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.fixedLen,callback:function(n){t.$set(e.width,"fixedLen",n)},expression:"item.width.fixedLen"}}):n("span",[t._v(t._s(e.width.fixedLen))]),t._v("\n                        最大宽度:"),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.maxLen,callback:function(n){t.$set(e.width,"maxLen",n)},expression:"item.width.maxLen"}}):n("span",[t._v(t._s(e.width.maxLen))])],1):n("div",[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.fixedFlag,expression:"!item.fixedFlag"}]},[t._v(t._s(t.isDoor?"门扇宽度":"门洞厚度"))]),t.isManager?n("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width,callback:function(n){t.$set(e,"width",n)},expression:"item.width"}}):n("span",[t._v(t._s(e.width>=0?"+"+e.width:e.width))]),t.isDoor&&t.isManager?n("i-switch",{model:{value:e.fixedFlag,callback:function(n){t.$set(e,"fixedFlag",n)},expression:"item.fixedFlag"}}):t._e()],1)]):t._e(),"thick"===i.key?n("div",[t.isManager?n("Input",{staticStyle:{width:"50px"},model:{value:e.thick,callback:function(n){t.$set(e,"thick",n)},expression:"item.thick"}}):n("span",[t._v(t._s(e.thick))]),t._v(" mm\n                        "),void 0!==e.thickType?n("span",[t.isManager?n("Select",{attrs:{transfer:""},model:{value:e.thickType,callback:function(n){t.$set(e,"thickType",n)},expression:"item.thickType"}},t._l(t.typeList,function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1):n("span",[t._v(t._s(e.thickType))])],1):n("span",[t._v("\n                            多层板\n                        ")])],1):t._e(),"thickness"===i.key?n("div",[t._v("\n                    只有E系列才有\n                ")]):t._e(),"num"===i.key?n("div",[t.isManager?n("InputNumber",{model:{value:e.num,callback:function(n){t.$set(e,"num",n)},expression:"item.num"}}):n("span",[t._v(t._s(e.num))])],1):t._e(),"action"===i.key?n("div",{staticClass:"action"},[n("Button",{attrs:{type:"text"},on:{click:function(e){return t.deleteItem(a)}}},[t._v("删除")]),n("Button",{attrs:{type:"text"},on:{click:function(e){return t.addItem(a)}}},[t._v("新增")])],1):t._e()])}),0)})],2)},z=[],U={props:{list:Array,isDoor:Boolean,sleeve:Boolean,doorName:String},data:function(){return{isManager:common.isManager,infoMap:{},typeList:["多层板","中纤板"],doorTypeList:["大门","小门"],columns:[{title:"名称",key:"name"},{title:"大小门",key:"doorType"},{title:"长度",key:"length"},{title:"宽度",key:"width"},{title:"厚度",key:"thick"},{title:"数量",key:"num"},{title:"操作",key:"action"}],nameList:[{name:"门洞宽度",para:"doorWidth"},{name:"门洞高度",para:"doorHeight"},{name:"门扇宽度",para:"doorLeafWidth"},{name:"门扇高度",para:"doorLeafHeight"}],nameMap:{doorWidth:"门洞宽度",doorHeight:"门洞高度",doorLeafWidth:"门扇宽度",doorLeafHeight:"门扇高度"}}},computed:{data:function(){return this.list}},mounted:function(){this.isDoor&&this.isManager||this.columns.splice(this.columns.length-1,1),this.doorName&&"skin"===this.doorName&&(this.columns=[{title:"名称",key:"name"},{title:"大小门",key:"doorType"},{title:"长度",key:"length"},{title:"宽度",key:"width"},{title:"厚度",key:"thick"},{title:"数量",key:"num"},{title:"操作",key:"action"}]),this.sleeve&&(this.columns=[{title:"名称",key:"name"},{title:"长度",key:"length"},{title:"宽度",key:"widthWord"},{title:"厚度",key:"thick"},{title:"厚度(备注)",key:"thickness"},{title:"数量",key:"num"}])},methods:{getClass:function(t){return t?"name"===t?"fixed-width":"num"===t?"fixed-width":"thick"===t?"fixed-width":"doorType"===t?this.doorName&&"skin"===this.doorName?"fixed-width-door":"not-show":this.isDoor&&"width"===t?"fixed-width":"flex-1":"flex-1"},deleteItem:function(t){this.data.splice(t,1)},addItem:function(t,e){var n={name:"名称",length:0,lenPara:"doorLeafHeight",width:0,thick:5,num:1,thickType:"多层板",fixedFlag:!1,lenFixedFlag:!1};"skin"===this.doorName&&(n.doorType="大门"),this.data.splice(t+1,0,n)}}},R=U,V=(n("3d6c"),Object(l["a"])(R,G,z,!1,null,null,null)),q=V.exports,X={data:function(){return{id:"",tabValue:"soil",groupList:[],url:"",showPictureFlag:!1,imgUrl:"",algorithm:null,wordMap:{name:"填写名称",groupId:"选择分组",bigImg:"填写大图图片地址",smallImg:"填写小图图片地址"},isManager:common.isManager,groupMap:{},uploadFileUrl:"https://api2.bmob.cn/2/files/",uploadImgName:"",word:"门洞厚度：x, 条件宽度:y, z: 挡条最大宽度; 如果 x >= y，挡条宽度 = z，如果x < y，挡条宽度 = z - ( y - x )"}},components:{MyTable:q},computed:{},mounted:function(){this.id=this.$route.query.id,this.id||(this.algorithm=this.cloneJson(p.algorithm)),this.getGroup()},methods:{initAlgorithm:function(t){this.algorithm=t},getGroup:function(){var t=this;common.get("classes/Group").then(function(e){t.groupList=e.results,t.groupList.forEach(function(e){t.groupMap[e.objectId]=e.title})})},cloneJson:function(t){return JSON.parse(JSON.stringify(t))},addNew:function(){var t=this.algorithm.other[this.tabValue].length;this.$refs[this.tabValue].addItem(t,this.tabValue)},showPicture:function(t){this.imgUrl=this.algorithm.baseInfo[t],this.showPictureFlag=!0},save:function(){var t=this;for(var e in this.algorithm.baseInfo){var n=this.algorithm.baseInfo[e];if(!n&&this.wordMap[e])return this.$Message.success("请"+this.wordMap[e]+"!")}var a=this.algorithm.baseInfo,i={groupId:a.groupId,title:a.name,info:a.info,algorithm:this.algorithm},o="/edit"===this.$route.path;o?common.update("classes/itemList/"+this.id,i).then(function(e){t.$Message.success("算法更新成功!")}):common.post("classes/itemList",i).then(function(e){t.$Message.success("算法保存成功!"),t.algorithm=t.cloneJson(p.algorithm)})},beforeUpload:function(t){return this.uploadImg(t),!1},uploadImg:function(t){var e=new FileReader,n=this;e.readAsArrayBuffer(t),e.onload=function(a){axios({method:"post",url:"https://api2.bmob.cn/2/files/"+t.name,headers:{"X-Bmob-Application-Id":"d5007b04394aef4cdb48560e3a48c6bb","X-Bmob-REST-API-Key":"5bf0663149c84d47c3d5c8949e025815","Content-Type":"content-Type"},data:e.result}).then(function(t){200===t.status&&(n.$Message.success("图片上传成功!"),n.algorithm.baseInfo[n.uploadImgName]=t.data.url)})}}}},K=X,Q=(n("0927"),Object(l["a"])(K,B,J,!1,null,null,null)),Y=Q.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editCalculation"},[n("new",{ref:"new"})],1)},tt=[],et={data:function(){return{}},components:{New:Y},computed:{},mounted:function(){var t=this;this.$nextTick(function(){t.getAlgorithm()})},methods:{getAlgorithm:function(){var t=this,e=this.$route.query.id;common.get("classes/itemList/"+e).then(function(e){t.$refs.new.initAlgorithm(e.algorithm)})}}},nt=et,at=Object(l["a"])(nt,Z,tt,!1,null,null,null),it=at.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"limiter"},[n("div",{staticClass:"container-login100"},[n("div",{staticClass:"wrap-login100"},[t._m(0),n("form",{staticClass:"login100-form validate-form"},[n("span",{staticClass:"login100-form-title"},[t._v("\n\t\t\t\t\t用户登录\n\t\t\t\t")]),n("div",{staticClass:"wrap-input100 validate-input",attrs:{"data-validate":"Valid email is required: ex@abc.xyz"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input100",attrs:{type:"text",name:"email",placeholder:"账号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("span",{staticClass:"focus-input100"}),t._m(1)]),n("div",{staticClass:"wrap-input100 validate-input",attrs:{"data-validate":"Password is required"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input100",attrs:{type:"password",name:"pass",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("span",{staticClass:"focus-input100"}),t._m(2)]),n("div",{staticClass:"container-login100-form-btn"},[n("button",{staticClass:"login100-form-btn",attrs:{type:"button"},on:{click:t.login}},[t._v("\n\t\t\t\t\t\t登录\n\t\t\t\t\t")])]),n("div",{staticClass:"text-center p-t-12"}),n("div",{staticClass:"text-center p-t-136"})])])])])},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login100-pic js-tilt",attrs:{"data-tilt":""}},[a("img",{attrs:{src:n("0810"),alt:"IMG"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"symbol-input100"},[n("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"symbol-input100"},[n("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}})])}],rt=(n("f91a"),{data:function(){return{username:"",password:""}},mounted:function(){},methods:{login:function(){var t=this;if(this.username)if(this.password){var e="?username="+this.username+"&password="+this.password;common.get("login"+e).then(function(e){t.$set(common,"username",t.username),t.$set(common,"isManager",e.manager),localStorage.setItem("username",t.username),localStorage.setItem("isManager",e.manager),t.$Message.success("登录成功"),t.$router.replace({path:"/"})}).catch(function(e){t.$Message.info("账号密码不正确，请重新输入!")})}else this.$Message.info("请输入密码!");else this.$Message.info("请输入用户名!")}}}),lt=rt,ut=(n("d3ab"),Object(l["a"])(lt,ot,st,!1,null,"3ca25322",null)),ct=ut.exports;a["default"].use(d["a"]);var dt=new d["a"]({routes:[{path:"/",name:"list",component:I},{path:"/input",name:"input",component:j},{path:"/new",name:"new",component:Y},{path:"/edit",name:"edit",component:it},{path:"/login",name:"login",component:ct}]}),ht=n("d978"),mt=n.n(ht),ft=(n("a117"),n("7f43")),pt=n.n(ft);a["default"].use(mt.a),a["default"].config.productionTip=!1,window.axios=pt.a;var gt="https://api2.bmob.cn/1/",vt={"X-Bmob-Application-Id":"d5007b04394aef4cdb48560e3a48c6bb","X-Bmob-REST-API-Key":"5bf0663149c84d47c3d5c8949e025815","Content-Type":"application/json"},bt={username:"",isManager:!1,get:function(t){return new Promise(function(e,n){pt()({method:"get",url:gt+t,headers:vt}).then(function(t){e(t.data)}).catch(function(t){n(t)})})},post:function(t,e){return new Promise(function(n){pt()({method:"post",url:gt+t,headers:vt,data:e}).then(function(t){200!==t.status&&201!==t.status||n(t.data)})})},delete:function(t,e){return new Promise(function(n){pt()({method:"delete",url:gt+t,headers:vt,data:e}).then(function(t){n(t.data)})})},update:function(t,e){return new Promise(function(n){pt()({method:"put",url:gt+t,headers:vt,data:e}).then(function(t){n(t.data)})})}};dt.beforeEach(function(t,e,n){n()});var It=localStorage.getItem("username"),kt=localStorage.getItem("isManager");bt.headers=vt,It&&(bt.username=It),"true"===kt?bt.isManager=!0:"false"===kt&&(bt.isManager=!1),window.common=bt,new a["default"]({router:dt,render:function(t){return t(c)}}).$mount("#app")},"5a6c":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("2b2a"),i=n.n(a);i.a},"704a":function(t,e,n){},"8d23":function(t,e,n){},"987c":function(t,e,n){},abcb:function(t,e,n){"use strict";var a=n("8d23"),i=n.n(a);i.a},ba27:function(t,e,n){"use strict";var a=n("ccee"),i=n.n(a);i.a},ccee:function(t,e,n){},ce77:function(t,e,n){"use strict";var a=n("5a6c"),i=n.n(a);i.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.7ba06c21.png"},d3ab:function(t,e,n){"use strict";var a=n("704a"),i=n.n(a);i.a}});
//# sourceMappingURL=app.cdafa670.js.map