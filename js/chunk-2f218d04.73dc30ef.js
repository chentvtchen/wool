(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f218d04"],{"0927":function(t,e,a){"use strict";var i=a("1c25"),o=a.n(i);o.a},"1c25":function(t,e,a){},"1f7b":function(t,e,a){"use strict";var i={algorithm:{baseInfo:{name:"",groupId:"",info:"",doorLeafHeight:0,doorLeafWidth:0,bigImg:"",smallImg:"",doorLeafThick:0},other:{soil:[{name:"面板料",length:-40,lenPara:"doorLeafHeight",width:-40,fixedFlag:!1,lenFixedFlag:!1,thick:5,thickType:"多层板",doorType:"大门",num:2},{name:"顶部面板",length:-40,lenPara:"doorLeafHeight",width:-40,fixedFlag:!1,lenFixedFlag:!1,thick:5,thickType:"多层板",doorType:"大门",num:2},{name:"池板料",length:-20,lenPara:"doorLeafHeight",width:120,fixedFlag:!0,lenFixedFlag:!1,thick:12,thickType:"中纤板",num:2}],skin:[]},line:{normal:[{name:"横套线",length:0,lenPara:"doorWidth",width:null,thick:"内15",thickness:"",num:2},{name:"竖套线",length:0,lenPara:"doorHeight",width:null,thick:"内15",thickness:"",num:4}],three:[{name:"横套线",length:0,lenPara:"doorWidth",width:null,thick:"内15",thickness:"",num:1},{name:"竖套线",length:0,lenPara:"doorHeight",width:null,thick:"内15",thickness:"",num:2}]},door:[{name:"横挡条",length:-18,lenPara:"doorLeafWidth",width:{maxLen:50,fixedLen:113},thick:12,num:1,showCondition:!0},{name:"横主板",length:50,lenPara:"doorLeafWidth",width:0,thick:22,num:1},{name:"竖挡条",length:10,lenPara:"doorLeafHeight",width:{maxLen:50,fixedLen:113},thick:12,num:2,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:10,width:0,thick:22,num:2}],cupboardDoors:[{name:"横挡条",length:-18,lenPara:"doorLeafWidth",width:{maxLen:75,fixedLen:108},thick:12,num:1,showCondition:!0},{name:"横主板",length:50,lenPara:"doorLeafWidth",width:0,thick:22,num:1},{name:"竖挡条",length:10,lenPara:"doorLeafHeight",width:{maxLen:75,fixedLen:108},thick:12,num:2,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:10,width:0,thick:22,num:2}],openDoors:[{name:"横挡条",length:-18,lenPara:"doorLeafWidth",width:{maxLen:50,fixedLen:118},thick:12,num:1,showCondition:!0},{name:"横主板",length:50,lenPara:"doorLeafWidth",width:0,thick:22,num:1},{name:"竖挡条",length:10,lenPara:"doorLeafHeight",width:{maxLen:50,fixedLen:118},thick:12,num:2,showCondition:!0},{name:"竖主板",lenPara:"doorLeafHeight",length:10,width:0,thick:22,num:2}],windowCover:[{name:"窗套",lenPara:"doorHeight",length:0,width:0,thick:22,num:2},{name:"窗套",length:0,lenPara:"doorWidth",width:0,thick:22,num:1}],dumb:[{name:"三面哑口套",lenPara:"doorHeight",length:0,width:0,thick:22,num:2},{name:"三面哑口套",length:0,lenPara:"doorWidth",width:0,thick:22,num:1}]}};e["a"]=i},"22a0":function(t,e,a){},"3a23":function(t,e,a){var i=a("694f").f,o=Function.prototype,n=/^\s*function ([^ (]*)/,s="name";s in o||a("3a0f")&&i(o,s,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"3d6c":function(t,e,a){"use strict";var i=a("22a0"),o=a.n(i);o.a},"612f":function(t,e,a){for(var i=a("5c07"),o=a("d753"),n=a("7f00"),s=a("4839"),l=a("c84b"),r=a("f03e"),d=a("f3ae"),h=d("iterator"),c=d("toStringTag"),m=r.Array,u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=o(u),f=0;f<g.length;f++){var p,b=g[f],v=u[b],k=s[b],_=k&&k.prototype;if(_&&(_[h]||l(_,h,m),_[c]||l(_,c,b),r[b]=m,v))for(p in i)_[p]||n(_,p,i[p],!0)}},"67bf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"newCalculation"},[t.algorithm?a("div",{staticClass:"cardWrap"},[a("Breadcrumb",{staticStyle:{"margin-bottom":"10px"}},[a("BreadcrumbItem",{attrs:{to:"/"}},[t._v("首页")]),a("BreadcrumbItem",[t.isManager?a("span",[t._v(t._s(t.id?"编辑":"新建"))]):t._e(),t._v("算法信息")])],1),a("Card",[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n                基本信息\n                "),t.isManager?a("Button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:t.save}},[t._v("保存算法")]):t._e()],1),a("Form",{attrs:{model:t.algorithm.baseInfo,"label-width":80}},[a("FormItem",{staticClass:"one-four",attrs:{label:"名称"}},[t.isManager?a("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.algorithm.baseInfo.name,callback:function(e){t.$set(t.algorithm.baseInfo,"name",e)},expression:"algorithm.baseInfo.name"}}):a("span",[t._v(t._s(t.algorithm.baseInfo.name))])],1),a("FormItem",{staticClass:"one-four",attrs:{label:"分组"}},[t.isManager?a("Select",{model:{value:t.algorithm.baseInfo.groupId,callback:function(e){t.$set(t.algorithm.baseInfo,"groupId",e)},expression:"algorithm.baseInfo.groupId"}},t._l(t.groupList,function(e){return a("Option",{key:e.title,attrs:{value:e.objectId}},[t._v(t._s(e.title))])}),1):a("span",[t._v(t._s(t.groupMap[t.algorithm.baseInfo.groupId]))])],1),a("FormItem",{staticClass:"one-four",attrs:{label:"简介"}},[t.isManager?a("Input",{attrs:{placeholder:"请输入简介"},model:{value:t.algorithm.baseInfo.info,callback:function(e){t.$set(t.algorithm.baseInfo,"info",e)},expression:"algorithm.baseInfo.info"}}):a("span",[t._v(t._s(t.algorithm.baseInfo.info))])],1),a("FormItem",{staticClass:"one-four",attrs:{label:"门扇宽度 ="}},[t._v("\n                    门洞宽度 "),t.isManager?a("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇宽度"},model:{value:t.algorithm.baseInfo.doorLeafWidth,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafWidth",e)},expression:"algorithm.baseInfo.doorLeafWidth"}}):a("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafWidth>0?"+"+t.algorithm.baseInfo.doorLeafWidth:t.algorithm.baseInfo.doorLeafWidth))])],1),a("FormItem",{staticClass:"one-four",attrs:{label:"门扇高度 ="}},[t._v("\n                    门洞高度 "),t.isManager?a("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇高度"},model:{value:t.algorithm.baseInfo.doorLeafHeight,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafHeight",e)},expression:"algorithm.baseInfo.doorLeafHeight"}}):a("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafHeight>0?"+"+t.algorithm.baseInfo.doorLeafHeight:t.algorithm.baseInfo.doorLeafHeight))])],1),a("FormItem",{staticClass:"one-four",attrs:{label:"门扇厚度"}},[t.isManager?a("InputNumber",{staticClass:"new-input",attrs:{placeholder:"请输入门扇厚度"},model:{value:t.algorithm.baseInfo.doorLeafThick,callback:function(e){t.$set(t.algorithm.baseInfo,"doorLeafThick",e)},expression:"algorithm.baseInfo.doorLeafThick"}}):a("span",[t._v(t._s(t.algorithm.baseInfo.doorLeafThick>0?"+"+t.algorithm.baseInfo.doorLeafThick:t.algorithm.baseInfo.doorLeafThick))])],1),t.isManager?a("FormItem",{staticClass:"one-four",attrs:{label:"大图"}},[a("Upload",{attrs:{action:t.uploadFileUrl,accept:"image/png, image/jpeg, image/jpg",format:["jpg","jpeg","png"],"before-upload":t.beforeUpload}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"},nativeOn:{click:function(e){t.uploadImgName="bigImg"}}},[t._v("上传大图")])],1)],1):t._e(),t.isManager?a("FormItem",{staticClass:"one-four",attrs:{label:"小图"}},[a("Upload",{attrs:{action:t.uploadFileUrl,accept:"image/png, image/jpeg, image/jpg",format:["jpg","jpeg","png"],"before-upload":t.beforeUpload}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"},nativeOn:{click:function(e){t.uploadImgName="smallImg"}}},[t._v("上传小图")])],1)],1):t._e(),a("div"),a("FormItem",{staticClass:"one-four",attrs:{label:"大图"}},[a("div",{staticClass:"img-wrap"},[t.algorithm.baseInfo.bigImg?a("img",{attrs:{src:t.url+t.algorithm.baseInfo.bigImg,alt:""},on:{click:function(e){return t.showPicture("bigImg")}}}):t._e()])]),a("FormItem",{staticClass:"one-four",attrs:{label:"小图"}},[a("div",{staticClass:"img-wrap"},[t.algorithm.baseInfo.smallImg?a("img",{attrs:{src:t.url+t.algorithm.baseInfo.smallImg,alt:""},on:{click:function(e){return t.showPicture("smallImg")}}}):t._e()])])],1)],1),a("Card",{staticClass:"door-card"},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("房门算法信息")]),a("Button",{staticClass:"add",nativeOn:{click:function(e){return t.addNew(e)}}},[t._v("新增")]),a("Tabs",{model:{value:t.tabValue,callback:function(e){t.tabValue=e},expression:"tabValue"}},[a("TabPane",{attrs:{label:"混油",name:"soil"}},[a("my-table",{ref:"soil",attrs:{list:t.algorithm.other.soil,doorName:"soil",isDoor:!0}})],1),a("TabPane",{attrs:{label:"贴皮",name:"skin"}},[a("my-table",{ref:"skin",attrs:{list:t.algorithm.other.skin,doorName:"skin",isDoor:!0}})],1)],1)],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                门框算法信息\n                "),a("span",{staticClass:"condition-info"},[t._v(t._s(t.word))])]),a("my-table",{ref:"door",attrs:{list:t.algorithm.door}})],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                柜门连套算法信息\n                ")]),a("my-table",{ref:"cupboardDoors",attrs:{list:t.algorithm.cupboardDoors}})],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                对开门连套算法信息\n                ")]),a("my-table",{ref:"openDoors",attrs:{list:t.algorithm.openDoors}})],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("三面窗套算法信息")]),a("my-table",{ref:"windowCover",attrs:{list:t.algorithm.windowCover}})],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("三面哑口套算法信息")]),a("my-table",{ref:"pass",attrs:{list:t.algorithm.dumb}})],1),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("套线算法信息")]),a("div",{staticClass:"title"},[t._v("\n                    房门连套套线、三面垭口套套线、对开门套线、柜门连套套线\n                ")]),a("my-table",{ref:"pass",attrs:{list:t.algorithm.line.normal,sleeve:!0}}),a("div",{staticClass:"title"},[t._v("\n                    三面窗套套线\n                ")]),a("my-table",{ref:"pass",attrs:{list:t.algorithm.line.three,sleeve:!0}})],1)],1):t._e(),a("Modal",{attrs:{title:"查看大图"},model:{value:t.showPictureFlag,callback:function(e){t.showPictureFlag=e},expression:"showPictureFlag"}},[a("div",{staticClass:"big-picture"},[t.imgUrl?a("img",{attrs:{src:t.imgUrl}}):t._e()])])],1)},o=[],n=(a("3a23"),a("612f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"table-header flex flex-wrap"},t._l(t.columns,function(e,i){return a("div",{key:i,staticClass:"table-item",class:t.getClass(e.key)},[t._v("\n            "+t._s(e.title)+"\n        ")])}),0),t._l(t.data,function(e,i){return a("div",{key:i,staticClass:"table-row flex flex-wrap"},t._l(t.columns,function(o,n){return a("div",{key:n,staticClass:"table-item",class:t.getClass(o.key)},["name"===o.key?a("div",[t.isManager?a("Input",{model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}}):a("span",[t._v(t._s(e.name))])],1):t._e(),"doorType"===o.key?a("div",[t.isManager?a("Select",{staticStyle:{width:"85px"},attrs:{transfer:""},model:{value:e.doorType,callback:function(a){t.$set(e,"doorType",a)},expression:"item.doorType"}},t._l(t.doorTypeList,function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])}),1):t._e()],1):t._e(),"length"===o.key?a("div",[t.isDoor&&e.lenFixedFlag?t._e():a("div",{staticStyle:{display:"inline-block"}},[t.isManager?a("Select",{staticStyle:{width:"85px"},attrs:{transfer:""},model:{value:e.lenPara,callback:function(a){t.$set(e,"lenPara",a)},expression:"item.lenPara"}},t._l(t.nameList,function(e){return a("Option",{key:e.para,attrs:{value:e.para}},[t._v(t._s(e.name))])}),1):a("span",[t._v(t._s(t.nameMap[e.lenPara]))])],1),t.isManager?a("InputNumber",{model:{value:e.length,callback:function(a){t.$set(e,"length",a)},expression:"item.length"}}):a("span",[t._v(t._s(e.length>=0?"+"+e.length:e.length))]),t.sleeve?a("span",[t._v("\n                        + "+t._s(e.name.indexOf("横")>-1?2:1)+"x套线宽度\n                    ")]):t._e(),t.isDoor&&t.isManager?a("i-switch",{model:{value:e.lenFixedFlag,callback:function(a){t.$set(e,"lenFixedFlag",a)},expression:"item.lenFixedFlag"}}):t._e()],1):t._e(),"widthWord"===o.key?a("div",[t._v("\n                    与型号相关\n                ")]):t._e(),"width"===o.key?a("div",[e.showCondition?a("div",[t._v("\n                        条件宽度: "),t.isManager?a("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.fixedLen,callback:function(a){t.$set(e.width,"fixedLen",a)},expression:"item.width.fixedLen"}}):a("span",[t._v(t._s(e.width.fixedLen))]),t._v("\n                        最大宽度:"),t.isManager?a("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width.maxLen,callback:function(a){t.$set(e.width,"maxLen",a)},expression:"item.width.maxLen"}}):a("span",[t._v(t._s(e.width.maxLen))])],1):a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.fixedFlag,expression:"!item.fixedFlag"}]},[t._v(t._s(t.isDoor?"门扇宽度":"门洞厚度"))]),t.isManager?a("InputNumber",{staticStyle:{width:"50px"},model:{value:e.width,callback:function(a){t.$set(e,"width",a)},expression:"item.width"}}):a("span",[t._v(t._s(e.width>=0?"+"+e.width:e.width))]),t.isDoor&&t.isManager?a("i-switch",{model:{value:e.fixedFlag,callback:function(a){t.$set(e,"fixedFlag",a)},expression:"item.fixedFlag"}}):t._e()],1)]):t._e(),"thick"===o.key?a("div",[t.isManager?a("Input",{staticStyle:{width:"50px"},model:{value:e.thick,callback:function(a){t.$set(e,"thick",a)},expression:"item.thick"}}):a("span",[t._v(t._s(e.thick))]),t._v(" mm\n                        "),void 0!==e.thickType?a("span",[t.isManager?a("Select",{attrs:{transfer:""},model:{value:e.thickType,callback:function(a){t.$set(e,"thickType",a)},expression:"item.thickType"}},t._l(t.typeList,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1):a("span",[t._v(t._s(e.thickType))])],1):a("span",[t._v("\n                            多层板\n                        ")])],1):t._e(),"thickness"===o.key?a("div",[t._v("\n                    只有E系列才有\n                ")]):t._e(),"num"===o.key?a("div",[t.isManager?a("InputNumber",{model:{value:e.num,callback:function(a){t.$set(e,"num",a)},expression:"item.num"}}):a("span",[t._v(t._s(e.num))])],1):t._e(),"action"===o.key?a("div",{staticClass:"action"},[a("Button",{attrs:{type:"text"},on:{click:function(e){return t.deleteItem(i)}}},[t._v("删除")]),a("Button",{attrs:{type:"text"},on:{click:function(e){return t.addItem(i)}}},[t._v("新增")])],1):t._e()])}),0)})],2)}),s=[],l={props:{list:Array,isDoor:Boolean,sleeve:Boolean,doorName:String},data:function(){return{isManager:common.isManager,infoMap:{},typeList:["多层板","中纤板"],doorTypeList:["大门","小门"],columns:[{title:"名称",key:"name"},{title:"大小门",key:"doorType"},{title:"长度",key:"length"},{title:"宽度",key:"width"},{title:"厚度",key:"thick"},{title:"数量",key:"num"},{title:"操作",key:"action"}],nameList:[{name:"门洞宽度",para:"doorWidth"},{name:"门洞高度",para:"doorHeight"},{name:"门扇宽度",para:"doorLeafWidth"},{name:"门扇高度",para:"doorLeafHeight"}],nameMap:{doorWidth:"门洞宽度",doorHeight:"门洞高度",doorLeafWidth:"门扇宽度",doorLeafHeight:"门扇高度"}}},computed:{data:function(){return this.list}},mounted:function(){this.isDoor&&this.isManager||this.columns.splice(this.columns.length-1,1),this.doorName&&(this.columns=[{title:"名称",key:"name"},{title:"大小门",key:"doorType"},{title:"长度",key:"length"},{title:"宽度",key:"width"},{title:"厚度",key:"thick"},{title:"数量",key:"num"},{title:"操作",key:"action"}]),this.sleeve&&(this.columns=[{title:"名称",key:"name"},{title:"长度",key:"length"},{title:"宽度",key:"widthWord"},{title:"厚度",key:"thick"},{title:"厚度(备注)",key:"thickness"},{title:"数量",key:"num"}])},methods:{getClass:function(t){return t?"name"===t?"fixed-width":"num"===t?"fixed-width":"thick"===t?"fixed-width":"doorType"===t?this.doorName?"fixed-width-door":"not-show":this.isDoor&&"width"===t?"fixed-width":"flex-1":"flex-1"},deleteItem:function(t){this.data.splice(t,1)},addItem:function(t,e){var a={name:"名称",length:0,lenPara:"doorLeafHeight",width:0,thick:5,num:1,thickType:"多层板",fixedFlag:!1,lenFixedFlag:!1};this.doorName&&(a.doorType="大门"),this.data.splice(t+1,0,a)}}},r=l,d=(a("3d6c"),a("17cc")),h=Object(d["a"])(r,n,s,!1,null,null,null),c=h.exports,m=a("1f7b"),u={data:function(){return{id:"",tabValue:"soil",groupList:[],url:"",showPictureFlag:!1,imgUrl:"",algorithm:null,wordMap:{name:"填写名称",groupId:"选择分组",bigImg:"填写大图图片地址",smallImg:"填写小图图片地址"},isManager:common.isManager,groupMap:{},uploadFileUrl:"https://api2.bmob.cn/2/files/",uploadImgName:"",word:"门洞厚度：x, 条件宽度:y, z: 挡条最大宽度; 如果 x >= y，挡条宽度 = z，如果x < y，挡条宽度 = z - ( y - x )"}},components:{MyTable:c},computed:{},mounted:function(){this.id=this.$route.query.id,this.id||(this.algorithm=this.cloneJson(m["a"].algorithm)),this.getGroup()},methods:{initAlgorithm:function(t){this.algorithm=t},getGroup:function(){var t=this;common.get("classes/Group").then(function(e){t.groupList=e.results,t.groupList.forEach(function(e){t.groupMap[e.objectId]=e.title})})},cloneJson:function(t){return JSON.parse(JSON.stringify(t))},addNew:function(){var t=this.algorithm.other[this.tabValue].length;this.$refs[this.tabValue].addItem(t,this.tabValue)},showPicture:function(t){this.imgUrl=this.algorithm.baseInfo[t],this.showPictureFlag=!0},save:function(){var t=this;for(var e in this.algorithm.baseInfo){var a=this.algorithm.baseInfo[e];if(!a&&this.wordMap[e])return this.$Message.success("请"+this.wordMap[e]+"!")}var i=this.algorithm.baseInfo,o={groupId:i.groupId,title:i.name,info:i.info,algorithm:this.algorithm},n="/edit"===this.$route.path;n?common.update("classes/itemList/"+this.id,o).then(function(e){t.$Message.success("算法更新成功!")}):common.post("classes/itemList",o).then(function(e){t.$Message.success("算法保存成功!"),t.algorithm=t.cloneJson(m["a"].algorithm)})},beforeUpload:function(t){return this.uploadImg(t),!1},uploadImg:function(t){var e=new FileReader,a=this;e.readAsArrayBuffer(t),e.onload=function(i){axios({method:"post",url:"https://api2.bmob.cn/2/files/"+t.name,headers:{"X-Bmob-Application-Id":"d5007b04394aef4cdb48560e3a48c6bb","X-Bmob-REST-API-Key":"5bf0663149c84d47c3d5c8949e025815","Content-Type":"content-Type"},data:e.result}).then(function(t){200===t.status&&(a.$Message.success("图片上传成功!"),a.algorithm.baseInfo[a.uploadImgName]=t.data.url)})}}}},g=u,f=(a("0927"),Object(d["a"])(g,i,o,!1,null,null,null));e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2f218d04.73dc30ef.js.map